/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/block/components/block/block.sass":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/block/components/block/block.sass ***!
  \****************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".youtool {\n  z-index: 10000;\n  opacity: 0;\n  position: fixed;\n  top: 0px;\n  left: 220px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  column-gap: 10px;\n  row-gap: 15px;\n  padding: 10px 15px;\n  border-radius: 10px;\n  backdrop-filter: blur(10px);\n  background: rgba(113, 88, 226, 0.3);\n  border: 3px solid #be2edd;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);\n  transition: 0.15s;\n}\n.youtool:hover {\n  opacity: 1;\n}\n.youtool-button {\n  cursor: pointer;\n  outline: none;\n  user-select: none;\n  border-radius: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 40px;\n  width: 40px;\n  font-size: 15px;\n  color: #fff;\n  text-shadow: 0 0 5px #be2edd;\n  font-weight: bold;\n  background: rgba(0, 0, 0, 0.3);\n  border: 2px solid rgba(190, 46, 221, 0.8);\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n  transition: 0.2s;\n}\n.youtool-button.active {\n  background: rgba(190, 46, 221, 0.3);\n  border: 2px solid #be2edd;\n  box-shadow: 0 0 5px #be2edd;\n}\n.youtool.no-transition {\n  transition: 0s;\n}\n.youtool.attach-top-left {\n  top: 0;\n  left: 220px;\n  bottom: unset;\n  right: unset;\n}\n.youtool.attach-bottom-left {\n  top: unset;\n  left: 0;\n  bottom: 0;\n  right: unset;\n}\n\n.active-speed {\n  user-select: none;\n  z-index: 10000;\n  position: fixed;\n  top: 20px;\n  left: 190px;\n  font-size: 15px;\n  font-weight: bold;\n  color: #cacaca;\n}", "",{"version":3,"sources":["webpack://./src/block/components/block/block.sass"],"names":[],"mappings":"AAAA;EACI,cAAA;EACA,UAAA;EACA,eAAA;EACA,QAAA;EACA,WAAA;EAEA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,gBAAA;EACA,aAAA;EACA,kBAAA;EACA,mBAAA;EAEA,2BAAA;EACA,mCAAA;EACA,yBAAA;EACA,uCAAA;EACA,iBAAA;AADJ;AAEI;EACI,UAAA;AAAR;AAEI;EACI,eAAA;EACA,aAAA;EACA,iBAAA;EACA,mBAAA;EACA,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,YAAA;EACA,WAAA;EACA,eAAA;EAEA,WAAA;EACA,4BAAA;EACA,iBAAA;EACA,8BAAA;EACA,yCAAA;EACA,uCAAA;EACA,gBAAA;AADR;AAGQ;EACI,mCAAA;EACA,yBAAA;EACA,2BAAA;AADZ;AAGI;EACI,cAAA;AADR;AAGI;EACI,MAAA;EACA,WAAA;EACA,aAAA;EACA,YAAA;AADR;AAEI;EACI,UAAA;EACA,OAAA;EACA,SAAA;EACA,YAAA;AAAR;;AAGA;EACI,iBAAA;EACA,cAAA;EACA,eAAA;EACA,SAAA;EACA,WAAA;EACA,eAAA;EACA,iBAAA;EACA,cAAA;AAAJ","sourcesContent":[".youtool\r\n    z-index: 10000\r\n    opacity: 0\r\n    position: fixed\r\n    top: 0px\r\n    left: 220px\r\n\r\n    display: flex\r\n    align-items: center\r\n    justify-content: center\r\n    column-gap: 10px\r\n    row-gap: 15px\r\n    padding: 10px 15px\r\n    border-radius: 10px\r\n\r\n    backdrop-filter: blur(10px)\r\n    background: rgba(113, 88, 226, 0.3)\r\n    border: 3px solid #be2edd\r\n    box-shadow: 0 0 10px rgba(#000, .4)\r\n    transition: .15s\r\n    &:hover\r\n        opacity: 1\r\n\r\n    &-button\r\n        cursor: pointer\r\n        outline: none\r\n        user-select: none\r\n        border-radius: 10px\r\n        display: flex\r\n        justify-content: center\r\n        align-items: center\r\n        height: 40px\r\n        width: 40px\r\n        font-size: 15px\r\n\r\n        color: #fff\r\n        text-shadow: 0 0 5px #be2edd\r\n        font-weight: bold\r\n        background: rgba(0, 0, 0, 0.3)\r\n        border: 2px solid rgba(#be2edd, 0.8)\r\n        box-shadow: 0 0 10px rgba(#000, .3)\r\n        transition: 0.2s\r\n\r\n        &.active\r\n            background: rgba(190, 46, 221, 0.3)\r\n            border: 2px solid #be2edd\r\n            box-shadow: 0 0 5px #be2edd\r\n\r\n    &.no-transition\r\n        transition: 0s\r\n\r\n    &.attach-top-left\r\n        top: 0\r\n        left: 220px\r\n        bottom: unset\r\n        right: unset\r\n    &.attach-bottom-left\r\n        top: unset\r\n        left: 0\r\n        bottom: 0\r\n        right: unset\r\n\r\n// Current video speed top left\r\n.active-speed\r\n    user-select: none\r\n    z-index: 10000\r\n    position: fixed\r\n    top: 20px\r\n    left: 190px\r\n    font-size: 15px\r\n    font-weight: bold\r\n    color: #cacaca\r\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./src/block/components/block/block.sass":
/*!***********************************************!*\
  !*** ./src/block/components/block/block.sass ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_block_sass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./block.sass */ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/block/components/block/block.sass");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_block_sass__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_block_sass__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_block_sass__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_block_sass__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./src/block.tsx":
/*!***********************!*\
  !*** ./src/block.tsx ***!
  \***********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
const jsx_runtime_1 = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");
const client_1 = __webpack_require__(/*! react-dom/client */ "./node_modules/react-dom/client.js");
const block_1 = __webpack_require__(/*! @/block/components/block */ "./src/block/components/block/index.ts");
const create_root_element_1 = __webpack_require__(/*! @/utils/create-root-element */ "./src/utils/create-root-element.ts");
(0, create_root_element_1.createRootElement)("youtool");
const root = (0, client_1.createRoot)(document.getElementById("youtool"));
root.render((0, jsx_runtime_1.jsx)(block_1.Block, {}));


/***/ }),

/***/ "./src/block/components/block/block.tsx":
/*!**********************************************!*\
  !*** ./src/block/components/block/block.tsx ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Block = void 0;
const jsx_runtime_1 = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");
const react_1 = __webpack_require__(/*! react */ "./node_modules/react/index.js");
const react_draggable_1 = __importDefault(__webpack_require__(/*! react-draggable */ "./node_modules/react-draggable/build/cjs/cjs.js"));
const classnames_1 = __importDefault(__webpack_require__(/*! classnames */ "./node_modules/classnames/index.js"));
const default_speeds_1 = __webpack_require__(/*! @/constants/default-speeds */ "./src/constants/default-speeds.ts");
const use_video_spy_1 = __webpack_require__(/*! @/block/hooks/use-video-spy */ "./src/block/hooks/use-video-spy.ts");
const use_quality_1 = __webpack_require__(/*! @/block/hooks/use-quality */ "./src/block/hooks/use-quality.ts");
const get_item_1 = __webpack_require__(/*! @/chrome/storage/get-item */ "./src/chrome/storage/get-item.ts");
const set_item_1 = __webpack_require__(/*! @/chrome/storage/set-item */ "./src/chrome/storage/set-item.ts");
__webpack_require__(/*! ./block.sass */ "./src/block/components/block/block.sass");
const Block = () => {
    var _a, _b, _c, _d;
    const [storage, setStorage] = (0, react_1.useState)(default_speeds_1.DEFAULT_STORAGE);
    const [loop, setLoop] = (0, react_1.useState)(false);
    const [isDragging, setIsDragging] = (0, react_1.useState)(false);
    const [activeSpeed, setActiveSpeed] = (0, use_video_spy_1.useVideoSpy)();
    const setBestQuality = (0, use_quality_1.useQuality)();
    const onDrag = (event, { x, y }) => {
        setStorage((oldStorage) => ({ ...oldStorage, position: { x, y } }));
    };
    const onDragEnd = () => {
        setIsDragging(false);
        (0, set_item_1.setItem)("position", storage.position);
    };
    const isBlockAttached = Object.keys((_a = storage.attach) !== null && _a !== void 0 ? _a : {})
        .map((key) => { var _a; return ((_a = storage.attach) !== null && _a !== void 0 ? _a : {})[key]; })
        .find((item) => item);
    (0, react_1.useEffect)(() => {
        const loadSavedSettings = async () => {
            var _a;
            const originalStorage = await (0, get_item_1.getItem)(["speeds", "position", "attach", "loopButton"]);
            if (!originalStorage) {
                return;
            }
            if ((_a = originalStorage.speeds) === null || _a === void 0 ? void 0 : _a.length) {
                setStorage((oldStorage) => ({ ...oldStorage, speeds: originalStorage.speeds }));
            }
            if (originalStorage.position) {
                setStorage((oldStorage) => ({ ...oldStorage, position: originalStorage.position }));
            }
            if (originalStorage.attach) {
                setStorage((oldStorage) => ({ ...oldStorage, attach: originalStorage.attach }));
            }
            if (originalStorage.loopButton) {
                setStorage((oldStorage) => ({ ...oldStorage, loopButton: originalStorage.loopButton }));
            }
        };
        loadSavedSettings();
    }, []);
    const loopVideo = () => {
        var _a;
        setLoop((isLoop) => !isLoop);
        (_a = document.querySelector(".ytp-contextmenu .ytp-menuitem")) === null || _a === void 0 ? void 0 : _a.click();
    };
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)("div", { className: "active-speed", children: activeSpeed }), (0, jsx_runtime_1.jsx)("div", { onContextMenu: setBestQuality, children: (0, jsx_runtime_1.jsx)(react_draggable_1.default, { defaultPosition: storage.position, position: isBlockAttached ? undefined : storage.position, onDrag: onDrag, onStart: () => setIsDragging(true), onStop: onDragEnd, disabled: isBlockAttached, children: (0, jsx_runtime_1.jsxs)("div", { className: (0, classnames_1.default)("youtool", {
                            "no-transition": isDragging,
                            "attach-top-left": (_b = storage.attach) === null || _b === void 0 ? void 0 : _b.topLeft,
                            "attach-bottom-left": (_c = storage.attach) === null || _c === void 0 ? void 0 : _c.bottomLeft,
                        }), children: [(_d = storage.speeds) === null || _d === void 0 ? void 0 : _d.map((speed) => ((0, jsx_runtime_1.jsx)("button", { className: (0, classnames_1.default)("youtool-button", { active: activeSpeed === speed }), onClick: () => setActiveSpeed(speed), children: speed }, speed))), storage.loopButton && ((0, jsx_runtime_1.jsx)("button", { className: (0, classnames_1.default)("youtool-button", { active: loop }), onClick: loopVideo, children: 122 }))] }) }) })] }));
};
exports.Block = Block;


/***/ }),

/***/ "./src/block/components/block/index.ts":
/*!*********************************************!*\
  !*** ./src/block/components/block/index.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Block = void 0;
var block_1 = __webpack_require__(/*! ./block */ "./src/block/components/block/block.tsx");
Object.defineProperty(exports, "Block", ({ enumerable: true, get: function () { return block_1.Block; } }));


/***/ }),

/***/ "./src/block/hooks/use-quality.ts":
/*!****************************************!*\
  !*** ./src/block/hooks/use-quality.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.useQuality = void 0;
const react_1 = __webpack_require__(/*! react */ "./node_modules/react/index.js");
const CLASSES = {
    SETTING_OPTIONS: ".ytp-settings-menu .ytp-panel-menu .ytp-menuitem[role='menuitem']",
    BEST_QUALITY_BUTTON: ".ytp-quality-menu .ytp-panel-menu .ytp-menuitem",
};
const useQuality = () => {
    const observer = (0, react_1.useRef)(null);
    const setBestQuality = (event) => {
        var _a;
        event.preventDefault();
        const onMutate = (mutations, observer) => {
            mutations.forEach(async ({ target }) => {
                if (!(target instanceof HTMLElement))
                    return;
                const settingsOptions = target.querySelectorAll(CLASSES.SETTING_OPTIONS);
                if (settingsOptions.length) {
                    const qualityButton = Array.from(settingsOptions).at(-1);
                    if (qualityButton instanceof HTMLElement) {
                        qualityButton.click();
                    }
                    return;
                }
                const bestQuality = document.querySelector(CLASSES.BEST_QUALITY_BUTTON);
                if (bestQuality instanceof HTMLElement) {
                    bestQuality.click();
                    observer.disconnect();
                }
            });
        };
        // If observer already running stop it (anti-spam)
        (_a = observer.current) === null || _a === void 0 ? void 0 : _a.disconnect();
        observer.current = new MutationObserver(onMutate);
        observer.current.observe(document, { childList: true, subtree: true });
        setTimeout(observer.current.disconnect, 3000);
        const settingsButton = document.querySelector(".ytp-settings-button");
        if (settingsButton) {
            settingsButton.click();
        }
        // Imitate mutation when user change video speed
        onMutate([{ target: document.body }], observer.current);
    };
    return setBestQuality;
};
exports.useQuality = useQuality;


/***/ }),

/***/ "./src/block/hooks/use-video-spy.ts":
/*!******************************************!*\
  !*** ./src/block/hooks/use-video-spy.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.useVideoSpy = void 0;
const react_1 = __webpack_require__(/*! react */ "./node_modules/react/index.js");
const useVideoSpy = () => {
    const [activeSpeed, setActiveSpeed] = (0, react_1.useState)(1);
    const observer = (0, react_1.useRef)(null);
    (0, react_1.useEffect)(() => {
        const onPlayBackRateChange = ({ target }) => {
            if (!(target instanceof HTMLVideoElement))
                return;
            // For fixing bug. When user change active tab or resize browser window, Youtube set playbackRate = 0
            if (target.playbackRate === 1)
                return;
            setActiveSpeed(target.playbackRate);
        };
        const onMutate = (mutations) => {
            mutations.forEach(({ target, addedNodes, removedNodes }) => {
                if (!(target instanceof HTMLElement))
                    return;
                const videos = target.querySelectorAll("video");
                if (!videos.length)
                    return;
                videos.forEach((video) => {
                    video.playbackRate = activeSpeed;
                    if (addedNodes === null || addedNodes === void 0 ? void 0 : addedNodes.length) {
                        video.addEventListener("ratechange", onPlayBackRateChange);
                    }
                    if (removedNodes === null || removedNodes === void 0 ? void 0 : removedNodes.length) {
                        video.removeEventListener("ratechange", onPlayBackRateChange);
                    }
                });
            });
        };
        observer.current = new MutationObserver(onMutate);
        observer.current.observe(document, { childList: true, subtree: true });
        // Imitate mutation when user change video speed
        onMutate([{ target: document.body }]);
        return () => {
            if (observer.current) {
                observer.current.disconnect();
            }
        };
    }, [activeSpeed]);
    return [activeSpeed, setActiveSpeed];
};
exports.useVideoSpy = useVideoSpy;


/***/ }),

/***/ "./src/chrome/storage/get-item.ts":
/*!****************************************!*\
  !*** ./src/chrome/storage/get-item.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getItem = void 0;
const getItem = async (names) => {
    try {
        const value = await chrome.storage.sync.get(names);
        return value;
    }
    catch {
        return null;
    }
};
exports.getItem = getItem;


/***/ }),

/***/ "./src/chrome/storage/set-item.ts":
/*!****************************************!*\
  !*** ./src/chrome/storage/set-item.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.setItem = void 0;
const setItem = async (name, value) => chrome.storage.sync.set({ [name]: value });
exports.setItem = setItem;


/***/ }),

/***/ "./src/constants/default-speeds.ts":
/*!*****************************************!*\
  !*** ./src/constants/default-speeds.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DEFAULT_STORAGE = exports.DEFAULT_SPEEDS = void 0;
exports.DEFAULT_SPEEDS = [1, 1.5, 2, 2.5, 3, 5];
exports.DEFAULT_STORAGE = {
    attach: { topLeft: true, bottomLeft: false },
    speeds: exports.DEFAULT_SPEEDS,
    loopButton: true,
    position: { x: 0, y: 0 },
};


/***/ }),

/***/ "./src/utils/create-root-element.ts":
/*!******************************************!*\
  !*** ./src/utils/create-root-element.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.createRootElement = void 0;
const createRootElement = (id = "root") => {
    const rootElement = document.createElement("section");
    rootElement.id = id;
    document.body.append(rootElement);
};
exports.createRootElement = createRootElement;


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	(() => {
/******/ 		var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);
/******/ 		var leafPrototypes;
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 16: return value when it's Promise-like
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if(typeof value === 'object' && value) {
/******/ 				if((mode & 4) && value.__esModule) return value;
/******/ 				if((mode & 16) && typeof value.then === 'function') return value;
/******/ 			}
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
/******/ 			for(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {
/******/ 				Object.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));
/******/ 			}
/******/ 			def['default'] = () => (value);
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/harmony module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.hmd = (module) => {
/******/ 			module = Object.create(module);
/******/ 			if (!module.children) module.children = [];
/******/ 			Object.defineProperty(module, 'exports', {
/******/ 				enumerable: true,
/******/ 				set: () => {
/******/ 					throw new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);
/******/ 				}
/******/ 			});
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"block": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkyoutool"] = self["webpackChunkyoutool"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["vendor"], () => (__webpack_require__("./src/block.tsx")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V0FDQTs7Ozs7V0NKQTs7V0FFQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7O1dBRUE7O1dBRUE7O1dBRUE7O1dBRUE7O1dBRUE7O1dBRUE7O1dBRUE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsTUFBTSxxQkFBcUI7V0FDM0I7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTs7V0FFQTtXQUNBO1dBQ0E7Ozs7O1dDaERBOzs7OztVRUFBO1VBQ0E7VUFDQTtVQUNBO1VBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95b3V0b29sLy4vc3JjL2Jsb2NrL2NvbXBvbmVudHMvYmxvY2svYmxvY2suc2FzcyIsIndlYnBhY2s6Ly95b3V0b29sLy4vc3JjL2Jsb2NrL2NvbXBvbmVudHMvYmxvY2svYmxvY2suc2Fzcz81MTEwIiwid2VicGFjazovL3lvdXRvb2wvLi9zcmMvYmxvY2sudHN4Iiwid2VicGFjazovL3lvdXRvb2wvLi9zcmMvYmxvY2svY29tcG9uZW50cy9ibG9jay9ibG9jay50c3giLCJ3ZWJwYWNrOi8veW91dG9vbC8uL3NyYy9ibG9jay9jb21wb25lbnRzL2Jsb2NrL2luZGV4LnRzIiwid2VicGFjazovL3lvdXRvb2wvLi9zcmMvYmxvY2svaG9va3MvdXNlLXF1YWxpdHkudHMiLCJ3ZWJwYWNrOi8veW91dG9vbC8uL3NyYy9ibG9jay9ob29rcy91c2UtdmlkZW8tc3B5LnRzIiwid2VicGFjazovL3lvdXRvb2wvLi9zcmMvY2hyb21lL3N0b3JhZ2UvZ2V0LWl0ZW0udHMiLCJ3ZWJwYWNrOi8veW91dG9vbC8uL3NyYy9jaHJvbWUvc3RvcmFnZS9zZXQtaXRlbS50cyIsIndlYnBhY2s6Ly95b3V0b29sLy4vc3JjL2NvbnN0YW50cy9kZWZhdWx0LXNwZWVkcy50cyIsIndlYnBhY2s6Ly95b3V0b29sLy4vc3JjL3V0aWxzL2NyZWF0ZS1yb290LWVsZW1lbnQudHMiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svcnVudGltZS9jcmVhdGUgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3lvdXRvb2wvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3lvdXRvb2wvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svcnVudGltZS9oYXJtb255IG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3lvdXRvb2wvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svcnVudGltZS9ub2RlIG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svYmVmb3JlLXN0YXJ0dXAiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL2FmdGVyLXN0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCIueW91dG9vbCB7XFxuICB6LWluZGV4OiAxMDAwMDtcXG4gIG9wYWNpdHk6IDA7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICB0b3A6IDBweDtcXG4gIGxlZnQ6IDIyMHB4O1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGNvbHVtbi1nYXA6IDEwcHg7XFxuICByb3ctZ2FwOiAxNXB4O1xcbiAgcGFkZGluZzogMTBweCAxNXB4O1xcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcXG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMTEzLCA4OCwgMjI2LCAwLjMpO1xcbiAgYm9yZGVyOiAzcHggc29saWQgI2JlMmVkZDtcXG4gIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC40KTtcXG4gIHRyYW5zaXRpb246IDAuMTVzO1xcbn1cXG4ueW91dG9vbDpob3ZlciB7XFxuICBvcGFjaXR5OiAxO1xcbn1cXG4ueW91dG9vbC1idXR0b24ge1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgb3V0bGluZTogbm9uZTtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBoZWlnaHQ6IDQwcHg7XFxuICB3aWR0aDogNDBweDtcXG4gIGZvbnQtc2l6ZTogMTVweDtcXG4gIGNvbG9yOiAjZmZmO1xcbiAgdGV4dC1zaGFkb3c6IDAgMCA1cHggI2JlMmVkZDtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjMpO1xcbiAgYm9yZGVyOiAycHggc29saWQgcmdiYSgxOTAsIDQ2LCAyMjEsIDAuOCk7XFxuICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMyk7XFxuICB0cmFuc2l0aW9uOiAwLjJzO1xcbn1cXG4ueW91dG9vbC1idXR0b24uYWN0aXZlIHtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMTkwLCA0NiwgMjIxLCAwLjMpO1xcbiAgYm9yZGVyOiAycHggc29saWQgI2JlMmVkZDtcXG4gIGJveC1zaGFkb3c6IDAgMCA1cHggI2JlMmVkZDtcXG59XFxuLnlvdXRvb2wubm8tdHJhbnNpdGlvbiB7XFxuICB0cmFuc2l0aW9uOiAwcztcXG59XFxuLnlvdXRvb2wuYXR0YWNoLXRvcC1sZWZ0IHtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDIyMHB4O1xcbiAgYm90dG9tOiB1bnNldDtcXG4gIHJpZ2h0OiB1bnNldDtcXG59XFxuLnlvdXRvb2wuYXR0YWNoLWJvdHRvbS1sZWZ0IHtcXG4gIHRvcDogdW5zZXQ7XFxuICBsZWZ0OiAwO1xcbiAgYm90dG9tOiAwO1xcbiAgcmlnaHQ6IHVuc2V0O1xcbn1cXG5cXG4uYWN0aXZlLXNwZWVkIHtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbiAgei1pbmRleDogMTAwMDA7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICB0b3A6IDIwcHg7XFxuICBsZWZ0OiAxOTBweDtcXG4gIGZvbnQtc2l6ZTogMTVweDtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgY29sb3I6ICNjYWNhY2E7XFxufVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9ibG9jay9jb21wb25lbnRzL2Jsb2NrL2Jsb2NrLnNhc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDSSxjQUFBO0VBQ0EsVUFBQTtFQUNBLGVBQUE7RUFDQSxRQUFBO0VBQ0EsV0FBQTtFQUVBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtFQUVBLDJCQUFBO0VBQ0EsbUNBQUE7RUFDQSx5QkFBQTtFQUNBLHVDQUFBO0VBQ0EsaUJBQUE7QUFESjtBQUVJO0VBQ0ksVUFBQTtBQUFSO0FBRUk7RUFDSSxlQUFBO0VBQ0EsYUFBQTtFQUNBLGlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtFQUVBLFdBQUE7RUFDQSw0QkFBQTtFQUNBLGlCQUFBO0VBQ0EsOEJBQUE7RUFDQSx5Q0FBQTtFQUNBLHVDQUFBO0VBQ0EsZ0JBQUE7QUFEUjtBQUdRO0VBQ0ksbUNBQUE7RUFDQSx5QkFBQTtFQUNBLDJCQUFBO0FBRFo7QUFHSTtFQUNJLGNBQUE7QUFEUjtBQUdJO0VBQ0ksTUFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0EsWUFBQTtBQURSO0FBRUk7RUFDSSxVQUFBO0VBQ0EsT0FBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0FBQVI7O0FBR0E7RUFDSSxpQkFBQTtFQUNBLGNBQUE7RUFDQSxlQUFBO0VBQ0EsU0FBQTtFQUNBLFdBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxjQUFBO0FBQUpcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLnlvdXRvb2xcXHJcXG4gICAgei1pbmRleDogMTAwMDBcXHJcXG4gICAgb3BhY2l0eTogMFxcclxcbiAgICBwb3NpdGlvbjogZml4ZWRcXHJcXG4gICAgdG9wOiAwcHhcXHJcXG4gICAgbGVmdDogMjIwcHhcXHJcXG5cXHJcXG4gICAgZGlzcGxheTogZmxleFxcclxcbiAgICBhbGlnbi1pdGVtczogY2VudGVyXFxyXFxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyXFxyXFxuICAgIGNvbHVtbi1nYXA6IDEwcHhcXHJcXG4gICAgcm93LWdhcDogMTVweFxcclxcbiAgICBwYWRkaW5nOiAxMHB4IDE1cHhcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogMTBweFxcclxcblxcclxcbiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweClcXHJcXG4gICAgYmFja2dyb3VuZDogcmdiYSgxMTMsIDg4LCAyMjYsIDAuMylcXHJcXG4gICAgYm9yZGVyOiAzcHggc29saWQgI2JlMmVkZFxcclxcbiAgICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKCMwMDAsIC40KVxcclxcbiAgICB0cmFuc2l0aW9uOiAuMTVzXFxyXFxuICAgICY6aG92ZXJcXHJcXG4gICAgICAgIG9wYWNpdHk6IDFcXHJcXG5cXHJcXG4gICAgJi1idXR0b25cXHJcXG4gICAgICAgIGN1cnNvcjogcG9pbnRlclxcclxcbiAgICAgICAgb3V0bGluZTogbm9uZVxcclxcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmVcXHJcXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHhcXHJcXG4gICAgICAgIGRpc3BsYXk6IGZsZXhcXHJcXG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyXFxyXFxuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyXFxyXFxuICAgICAgICBoZWlnaHQ6IDQwcHhcXHJcXG4gICAgICAgIHdpZHRoOiA0MHB4XFxyXFxuICAgICAgICBmb250LXNpemU6IDE1cHhcXHJcXG5cXHJcXG4gICAgICAgIGNvbG9yOiAjZmZmXFxyXFxuICAgICAgICB0ZXh0LXNoYWRvdzogMCAwIDVweCAjYmUyZWRkXFxyXFxuICAgICAgICBmb250LXdlaWdodDogYm9sZFxcclxcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjMpXFxyXFxuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCByZ2JhKCNiZTJlZGQsIDAuOClcXHJcXG4gICAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoIzAwMCwgLjMpXFxyXFxuICAgICAgICB0cmFuc2l0aW9uOiAwLjJzXFxyXFxuXFxyXFxuICAgICAgICAmLmFjdGl2ZVxcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMTkwLCA0NiwgMjIxLCAwLjMpXFxyXFxuICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgI2JlMmVkZFxcclxcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCA1cHggI2JlMmVkZFxcclxcblxcclxcbiAgICAmLm5vLXRyYW5zaXRpb25cXHJcXG4gICAgICAgIHRyYW5zaXRpb246IDBzXFxyXFxuXFxyXFxuICAgICYuYXR0YWNoLXRvcC1sZWZ0XFxyXFxuICAgICAgICB0b3A6IDBcXHJcXG4gICAgICAgIGxlZnQ6IDIyMHB4XFxyXFxuICAgICAgICBib3R0b206IHVuc2V0XFxyXFxuICAgICAgICByaWdodDogdW5zZXRcXHJcXG4gICAgJi5hdHRhY2gtYm90dG9tLWxlZnRcXHJcXG4gICAgICAgIHRvcDogdW5zZXRcXHJcXG4gICAgICAgIGxlZnQ6IDBcXHJcXG4gICAgICAgIGJvdHRvbTogMFxcclxcbiAgICAgICAgcmlnaHQ6IHVuc2V0XFxyXFxuXFxyXFxuLy8gQ3VycmVudCB2aWRlbyBzcGVlZCB0b3AgbGVmdFxcclxcbi5hY3RpdmUtc3BlZWRcXHJcXG4gICAgdXNlci1zZWxlY3Q6IG5vbmVcXHJcXG4gICAgei1pbmRleDogMTAwMDBcXHJcXG4gICAgcG9zaXRpb246IGZpeGVkXFxyXFxuICAgIHRvcDogMjBweFxcclxcbiAgICBsZWZ0OiAxOTBweFxcclxcbiAgICBmb250LXNpemU6IDE1cHhcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGRcXHJcXG4gICAgY29sb3I6ICNjYWNhY2FcXHJcXG5cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICBpbXBvcnQgZG9tQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0U3R5bGVFbGVtZW50IGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanMhLi9ibG9jay5zYXNzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vYmxvY2suc2Fzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGpzeF9ydW50aW1lXzEgPSByZXF1aXJlKFwicmVhY3QvanN4LXJ1bnRpbWVcIik7XHJcbmNvbnN0IGNsaWVudF8xID0gcmVxdWlyZShcInJlYWN0LWRvbS9jbGllbnRcIik7XHJcbmNvbnN0IGJsb2NrXzEgPSByZXF1aXJlKFwiQC9ibG9jay9jb21wb25lbnRzL2Jsb2NrXCIpO1xyXG5jb25zdCBjcmVhdGVfcm9vdF9lbGVtZW50XzEgPSByZXF1aXJlKFwiQC91dGlscy9jcmVhdGUtcm9vdC1lbGVtZW50XCIpO1xyXG4oMCwgY3JlYXRlX3Jvb3RfZWxlbWVudF8xLmNyZWF0ZVJvb3RFbGVtZW50KShcInlvdXRvb2xcIik7XHJcbmNvbnN0IHJvb3QgPSAoMCwgY2xpZW50XzEuY3JlYXRlUm9vdCkoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ5b3V0b29sXCIpKTtcclxucm9vdC5yZW5kZXIoKDAsIGpzeF9ydW50aW1lXzEuanN4KShibG9ja18xLkJsb2NrLCB7fSkpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkJsb2NrID0gdm9pZCAwO1xyXG5jb25zdCBqc3hfcnVudGltZV8xID0gcmVxdWlyZShcInJlYWN0L2pzeC1ydW50aW1lXCIpO1xyXG5jb25zdCByZWFjdF8xID0gcmVxdWlyZShcInJlYWN0XCIpO1xyXG5jb25zdCByZWFjdF9kcmFnZ2FibGVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicmVhY3QtZHJhZ2dhYmxlXCIpKTtcclxuY29uc3QgY2xhc3NuYW1lc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJjbGFzc25hbWVzXCIpKTtcclxuY29uc3QgZGVmYXVsdF9zcGVlZHNfMSA9IHJlcXVpcmUoXCJAL2NvbnN0YW50cy9kZWZhdWx0LXNwZWVkc1wiKTtcclxuY29uc3QgdXNlX3ZpZGVvX3NweV8xID0gcmVxdWlyZShcIkAvYmxvY2svaG9va3MvdXNlLXZpZGVvLXNweVwiKTtcclxuY29uc3QgdXNlX3F1YWxpdHlfMSA9IHJlcXVpcmUoXCJAL2Jsb2NrL2hvb2tzL3VzZS1xdWFsaXR5XCIpO1xyXG5jb25zdCBnZXRfaXRlbV8xID0gcmVxdWlyZShcIkAvY2hyb21lL3N0b3JhZ2UvZ2V0LWl0ZW1cIik7XHJcbmNvbnN0IHNldF9pdGVtXzEgPSByZXF1aXJlKFwiQC9jaHJvbWUvc3RvcmFnZS9zZXQtaXRlbVwiKTtcclxucmVxdWlyZShcIi4vYmxvY2suc2Fzc1wiKTtcclxuY29uc3QgQmxvY2sgPSAoKSA9PiB7XHJcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XHJcbiAgICBjb25zdCBbc3RvcmFnZSwgc2V0U3RvcmFnZV0gPSAoMCwgcmVhY3RfMS51c2VTdGF0ZSkoZGVmYXVsdF9zcGVlZHNfMS5ERUZBVUxUX1NUT1JBR0UpO1xyXG4gICAgY29uc3QgW2xvb3AsIHNldExvb3BdID0gKDAsIHJlYWN0XzEudXNlU3RhdGUpKGZhbHNlKTtcclxuICAgIGNvbnN0IFtpc0RyYWdnaW5nLCBzZXRJc0RyYWdnaW5nXSA9ICgwLCByZWFjdF8xLnVzZVN0YXRlKShmYWxzZSk7XHJcbiAgICBjb25zdCBbYWN0aXZlU3BlZWQsIHNldEFjdGl2ZVNwZWVkXSA9ICgwLCB1c2VfdmlkZW9fc3B5XzEudXNlVmlkZW9TcHkpKCk7XHJcbiAgICBjb25zdCBzZXRCZXN0UXVhbGl0eSA9ICgwLCB1c2VfcXVhbGl0eV8xLnVzZVF1YWxpdHkpKCk7XHJcbiAgICBjb25zdCBvbkRyYWcgPSAoZXZlbnQsIHsgeCwgeSB9KSA9PiB7XHJcbiAgICAgICAgc2V0U3RvcmFnZSgob2xkU3RvcmFnZSkgPT4gKHsgLi4ub2xkU3RvcmFnZSwgcG9zaXRpb246IHsgeCwgeSB9IH0pKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBvbkRyYWdFbmQgPSAoKSA9PiB7XHJcbiAgICAgICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7XHJcbiAgICAgICAgKDAsIHNldF9pdGVtXzEuc2V0SXRlbSkoXCJwb3NpdGlvblwiLCBzdG9yYWdlLnBvc2l0aW9uKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBpc0Jsb2NrQXR0YWNoZWQgPSBPYmplY3Qua2V5cygoX2EgPSBzdG9yYWdlLmF0dGFjaCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30pXHJcbiAgICAgICAgLm1hcCgoa2V5KSA9PiB7IHZhciBfYTsgcmV0dXJuICgoX2EgPSBzdG9yYWdlLmF0dGFjaCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30pW2tleV07IH0pXHJcbiAgICAgICAgLmZpbmQoKGl0ZW0pID0+IGl0ZW0pO1xyXG4gICAgKDAsIHJlYWN0XzEudXNlRWZmZWN0KSgoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbG9hZFNhdmVkU2V0dGluZ3MgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxTdG9yYWdlID0gYXdhaXQgKDAsIGdldF9pdGVtXzEuZ2V0SXRlbSkoW1wic3BlZWRzXCIsIFwicG9zaXRpb25cIiwgXCJhdHRhY2hcIiwgXCJsb29wQnV0dG9uXCJdKTtcclxuICAgICAgICAgICAgaWYgKCFvcmlnaW5hbFN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoKF9hID0gb3JpZ2luYWxTdG9yYWdlLnNwZWVkcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgc2V0U3RvcmFnZSgob2xkU3RvcmFnZSkgPT4gKHsgLi4ub2xkU3RvcmFnZSwgc3BlZWRzOiBvcmlnaW5hbFN0b3JhZ2Uuc3BlZWRzIH0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxTdG9yYWdlLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRTdG9yYWdlKChvbGRTdG9yYWdlKSA9PiAoeyAuLi5vbGRTdG9yYWdlLCBwb3NpdGlvbjogb3JpZ2luYWxTdG9yYWdlLnBvc2l0aW9uIH0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxTdG9yYWdlLmF0dGFjaCkge1xyXG4gICAgICAgICAgICAgICAgc2V0U3RvcmFnZSgob2xkU3RvcmFnZSkgPT4gKHsgLi4ub2xkU3RvcmFnZSwgYXR0YWNoOiBvcmlnaW5hbFN0b3JhZ2UuYXR0YWNoIH0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxTdG9yYWdlLmxvb3BCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgIHNldFN0b3JhZ2UoKG9sZFN0b3JhZ2UpID0+ICh7IC4uLm9sZFN0b3JhZ2UsIGxvb3BCdXR0b246IG9yaWdpbmFsU3RvcmFnZS5sb29wQnV0dG9uIH0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbG9hZFNhdmVkU2V0dGluZ3MoKTtcclxuICAgIH0sIFtdKTtcclxuICAgIGNvbnN0IGxvb3BWaWRlbyA9ICgpID0+IHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgc2V0TG9vcCgoaXNMb29wKSA9PiAhaXNMb29wKTtcclxuICAgICAgICAoX2EgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnl0cC1jb250ZXh0bWVudSAueXRwLW1lbnVpdGVtXCIpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xpY2soKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gKCgwLCBqc3hfcnVudGltZV8xLmpzeHMpKGpzeF9ydW50aW1lXzEuRnJhZ21lbnQsIHsgY2hpbGRyZW46IFsoMCwganN4X3J1bnRpbWVfMS5qc3gpKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImFjdGl2ZS1zcGVlZFwiLCBjaGlsZHJlbjogYWN0aXZlU3BlZWQgfSksICgwLCBqc3hfcnVudGltZV8xLmpzeCkoXCJkaXZcIiwgeyBvbkNvbnRleHRNZW51OiBzZXRCZXN0UXVhbGl0eSwgY2hpbGRyZW46ICgwLCBqc3hfcnVudGltZV8xLmpzeCkocmVhY3RfZHJhZ2dhYmxlXzEuZGVmYXVsdCwgeyBkZWZhdWx0UG9zaXRpb246IHN0b3JhZ2UucG9zaXRpb24sIHBvc2l0aW9uOiBpc0Jsb2NrQXR0YWNoZWQgPyB1bmRlZmluZWQgOiBzdG9yYWdlLnBvc2l0aW9uLCBvbkRyYWc6IG9uRHJhZywgb25TdGFydDogKCkgPT4gc2V0SXNEcmFnZ2luZyh0cnVlKSwgb25TdG9wOiBvbkRyYWdFbmQsIGRpc2FibGVkOiBpc0Jsb2NrQXR0YWNoZWQsIGNoaWxkcmVuOiAoMCwganN4X3J1bnRpbWVfMS5qc3hzKShcImRpdlwiLCB7IGNsYXNzTmFtZTogKDAsIGNsYXNzbmFtZXNfMS5kZWZhdWx0KShcInlvdXRvb2xcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuby10cmFuc2l0aW9uXCI6IGlzRHJhZ2dpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImF0dGFjaC10b3AtbGVmdFwiOiAoX2IgPSBzdG9yYWdlLmF0dGFjaCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRvcExlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImF0dGFjaC1ib3R0b20tbGVmdFwiOiAoX2MgPSBzdG9yYWdlLmF0dGFjaCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmJvdHRvbUxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBjaGlsZHJlbjogWyhfZCA9IHN0b3JhZ2Uuc3BlZWRzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QubWFwKChzcGVlZCkgPT4gKCgwLCBqc3hfcnVudGltZV8xLmpzeCkoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6ICgwLCBjbGFzc25hbWVzXzEuZGVmYXVsdCkoXCJ5b3V0b29sLWJ1dHRvblwiLCB7IGFjdGl2ZTogYWN0aXZlU3BlZWQgPT09IHNwZWVkIH0pLCBvbkNsaWNrOiAoKSA9PiBzZXRBY3RpdmVTcGVlZChzcGVlZCksIGNoaWxkcmVuOiBzcGVlZCB9LCBzcGVlZCkpKSwgc3RvcmFnZS5sb29wQnV0dG9uICYmICgoMCwganN4X3J1bnRpbWVfMS5qc3gpKFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiAoMCwgY2xhc3NuYW1lc18xLmRlZmF1bHQpKFwieW91dG9vbC1idXR0b25cIiwgeyBhY3RpdmU6IGxvb3AgfSksIG9uQ2xpY2s6IGxvb3BWaWRlbywgY2hpbGRyZW46IDEyMiB9KSldIH0pIH0pIH0pXSB9KSk7XHJcbn07XHJcbmV4cG9ydHMuQmxvY2sgPSBCbG9jaztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5CbG9jayA9IHZvaWQgMDtcclxudmFyIGJsb2NrXzEgPSByZXF1aXJlKFwiLi9ibG9ja1wiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQmxvY2tcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJsb2NrXzEuQmxvY2s7IH0gfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMudXNlUXVhbGl0eSA9IHZvaWQgMDtcclxuY29uc3QgcmVhY3RfMSA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcclxuY29uc3QgQ0xBU1NFUyA9IHtcclxuICAgIFNFVFRJTkdfT1BUSU9OUzogXCIueXRwLXNldHRpbmdzLW1lbnUgLnl0cC1wYW5lbC1tZW51IC55dHAtbWVudWl0ZW1bcm9sZT0nbWVudWl0ZW0nXVwiLFxyXG4gICAgQkVTVF9RVUFMSVRZX0JVVFRPTjogXCIueXRwLXF1YWxpdHktbWVudSAueXRwLXBhbmVsLW1lbnUgLnl0cC1tZW51aXRlbVwiLFxyXG59O1xyXG5jb25zdCB1c2VRdWFsaXR5ID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSAoMCwgcmVhY3RfMS51c2VSZWYpKG51bGwpO1xyXG4gICAgY29uc3Qgc2V0QmVzdFF1YWxpdHkgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBvbk11dGF0ZSA9IChtdXRhdGlvbnMsIG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKGFzeW5jICh7IHRhcmdldCB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3NPcHRpb25zID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoQ0xBU1NFUy5TRVRUSU5HX09QVElPTlMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzT3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBxdWFsaXR5QnV0dG9uID0gQXJyYXkuZnJvbShzZXR0aW5nc09wdGlvbnMpLmF0KC0xKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocXVhbGl0eUJ1dHRvbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1YWxpdHlCdXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVzdFF1YWxpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKENMQVNTRVMuQkVTVF9RVUFMSVRZX0JVVFRPTik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmVzdFF1YWxpdHkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3RRdWFsaXR5LmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIElmIG9ic2VydmVyIGFscmVhZHkgcnVubmluZyBzdG9wIGl0IChhbnRpLXNwYW0pXHJcbiAgICAgICAgKF9hID0gb2JzZXJ2ZXIuY3VycmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICBvYnNlcnZlci5jdXJyZW50ID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIob25NdXRhdGUpO1xyXG4gICAgICAgIG9ic2VydmVyLmN1cnJlbnQub2JzZXJ2ZShkb2N1bWVudCwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XHJcbiAgICAgICAgc2V0VGltZW91dChvYnNlcnZlci5jdXJyZW50LmRpc2Nvbm5lY3QsIDMwMDApO1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi55dHAtc2V0dGluZ3MtYnV0dG9uXCIpO1xyXG4gICAgICAgIGlmIChzZXR0aW5nc0J1dHRvbikge1xyXG4gICAgICAgICAgICBzZXR0aW5nc0J1dHRvbi5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJbWl0YXRlIG11dGF0aW9uIHdoZW4gdXNlciBjaGFuZ2UgdmlkZW8gc3BlZWRcclxuICAgICAgICBvbk11dGF0ZShbeyB0YXJnZXQ6IGRvY3VtZW50LmJvZHkgfV0sIG9ic2VydmVyLmN1cnJlbnQpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBzZXRCZXN0UXVhbGl0eTtcclxufTtcclxuZXhwb3J0cy51c2VRdWFsaXR5ID0gdXNlUXVhbGl0eTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy51c2VWaWRlb1NweSA9IHZvaWQgMDtcclxuY29uc3QgcmVhY3RfMSA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcclxuY29uc3QgdXNlVmlkZW9TcHkgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBbYWN0aXZlU3BlZWQsIHNldEFjdGl2ZVNwZWVkXSA9ICgwLCByZWFjdF8xLnVzZVN0YXRlKSgxKTtcclxuICAgIGNvbnN0IG9ic2VydmVyID0gKDAsIHJlYWN0XzEudXNlUmVmKShudWxsKTtcclxuICAgICgwLCByZWFjdF8xLnVzZUVmZmVjdCkoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9uUGxheUJhY2tSYXRlQ2hhbmdlID0gKHsgdGFyZ2V0IH0pID0+IHtcclxuICAgICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIC8vIEZvciBmaXhpbmcgYnVnLiBXaGVuIHVzZXIgY2hhbmdlIGFjdGl2ZSB0YWIgb3IgcmVzaXplIGJyb3dzZXIgd2luZG93LCBZb3V0dWJlIHNldCBwbGF5YmFja1JhdGUgPSAwXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQucGxheWJhY2tSYXRlID09PSAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBzZXRBY3RpdmVTcGVlZCh0YXJnZXQucGxheWJhY2tSYXRlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IG9uTXV0YXRlID0gKG11dGF0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaCgoeyB0YXJnZXQsIGFkZGVkTm9kZXMsIHJlbW92ZWROb2RlcyB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlkZW9zID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ2aWRlb1wiKTtcclxuICAgICAgICAgICAgICAgIGlmICghdmlkZW9zLmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB2aWRlb3MuZm9yRWFjaCgodmlkZW8pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2aWRlby5wbGF5YmFja1JhdGUgPSBhY3RpdmVTcGVlZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkZWROb2RlcyA9PT0gbnVsbCB8fCBhZGRlZE5vZGVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZGRlZE5vZGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKFwicmF0ZWNoYW5nZVwiLCBvblBsYXlCYWNrUmF0ZUNoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmVkTm9kZXMgPT09IG51bGwgfHwgcmVtb3ZlZE5vZGVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZW1vdmVkTm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyYXRlY2hhbmdlXCIsIG9uUGxheUJhY2tSYXRlQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBvYnNlcnZlci5jdXJyZW50ID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIob25NdXRhdGUpO1xyXG4gICAgICAgIG9ic2VydmVyLmN1cnJlbnQub2JzZXJ2ZShkb2N1bWVudCwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XHJcbiAgICAgICAgLy8gSW1pdGF0ZSBtdXRhdGlvbiB3aGVuIHVzZXIgY2hhbmdlIHZpZGVvIHNwZWVkXHJcbiAgICAgICAgb25NdXRhdGUoW3sgdGFyZ2V0OiBkb2N1bWVudC5ib2R5IH1dKTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAob2JzZXJ2ZXIuY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY3VycmVudC5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgW2FjdGl2ZVNwZWVkXSk7XHJcbiAgICByZXR1cm4gW2FjdGl2ZVNwZWVkLCBzZXRBY3RpdmVTcGVlZF07XHJcbn07XHJcbmV4cG9ydHMudXNlVmlkZW9TcHkgPSB1c2VWaWRlb1NweTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5nZXRJdGVtID0gdm9pZCAwO1xyXG5jb25zdCBnZXRJdGVtID0gYXN5bmMgKG5hbWVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQobmFtZXMpO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGNhdGNoIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufTtcclxuZXhwb3J0cy5nZXRJdGVtID0gZ2V0SXRlbTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5zZXRJdGVtID0gdm9pZCAwO1xyXG5jb25zdCBzZXRJdGVtID0gYXN5bmMgKG5hbWUsIHZhbHVlKSA9PiBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7IFtuYW1lXTogdmFsdWUgfSk7XHJcbmV4cG9ydHMuc2V0SXRlbSA9IHNldEl0ZW07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuREVGQVVMVF9TVE9SQUdFID0gZXhwb3J0cy5ERUZBVUxUX1NQRUVEUyA9IHZvaWQgMDtcclxuZXhwb3J0cy5ERUZBVUxUX1NQRUVEUyA9IFsxLCAxLjUsIDIsIDIuNSwgMywgNV07XHJcbmV4cG9ydHMuREVGQVVMVF9TVE9SQUdFID0ge1xyXG4gICAgYXR0YWNoOiB7IHRvcExlZnQ6IHRydWUsIGJvdHRvbUxlZnQ6IGZhbHNlIH0sXHJcbiAgICBzcGVlZHM6IGV4cG9ydHMuREVGQVVMVF9TUEVFRFMsXHJcbiAgICBsb29wQnV0dG9uOiB0cnVlLFxyXG4gICAgcG9zaXRpb246IHsgeDogMCwgeTogMCB9LFxyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNyZWF0ZVJvb3RFbGVtZW50ID0gdm9pZCAwO1xyXG5jb25zdCBjcmVhdGVSb290RWxlbWVudCA9IChpZCA9IFwicm9vdFwiKSA9PiB7XHJcbiAgICBjb25zdCByb290RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpO1xyXG4gICAgcm9vdEVsZW1lbnQuaWQgPSBpZDtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHJvb3RFbGVtZW50KTtcclxufTtcclxuZXhwb3J0cy5jcmVhdGVSb290RWxlbWVudCA9IGNyZWF0ZVJvb3RFbGVtZW50O1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHRsb2FkZWQ6IGZhbHNlLFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCJ2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgPyAob2JqKSA9PiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpIDogKG9iaikgPT4gKG9iai5fX3Byb3RvX18pO1xudmFyIGxlYWZQcm90b3R5cGVzO1xuLy8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4vLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLy8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4vLyBtb2RlICYgMTY6IHJldHVybiB2YWx1ZSB3aGVuIGl0J3MgUHJvbWlzZS1saWtlXG4vLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuXHRpZihtb2RlICYgMSkgdmFsdWUgPSB0aGlzKHZhbHVlKTtcblx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcblx0aWYodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSkge1xuXHRcdGlmKChtb2RlICYgNCkgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuXHRcdGlmKChtb2RlICYgMTYpICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdmFsdWU7XG5cdH1cblx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcblx0dmFyIGRlZiA9IHt9O1xuXHRsZWFmUHJvdG90eXBlcyA9IGxlYWZQcm90b3R5cGVzIHx8IFtudWxsLCBnZXRQcm90byh7fSksIGdldFByb3RvKFtdKSwgZ2V0UHJvdG8oZ2V0UHJvdG8pXTtcblx0Zm9yKHZhciBjdXJyZW50ID0gbW9kZSAmIDIgJiYgdmFsdWU7IHR5cGVvZiBjdXJyZW50ID09ICdvYmplY3QnICYmICF+bGVhZlByb3RvdHlwZXMuaW5kZXhPZihjdXJyZW50KTsgY3VycmVudCA9IGdldFByb3RvKGN1cnJlbnQpKSB7XG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY3VycmVudCkuZm9yRWFjaCgoa2V5KSA9PiAoZGVmW2tleV0gPSAoKSA9PiAodmFsdWVba2V5XSkpKTtcblx0fVxuXHRkZWZbJ2RlZmF1bHQnXSA9ICgpID0+ICh2YWx1ZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChucywgZGVmKTtcblx0cmV0dXJuIG5zO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18uaG1kID0gKG1vZHVsZSkgPT4ge1xuXHRtb2R1bGUgPSBPYmplY3QuY3JlYXRlKG1vZHVsZSk7XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgJ2V4cG9ydHMnLCB7XG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRzZXQ6ICgpID0+IHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignRVMgTW9kdWxlcyBtYXkgbm90IGFzc2lnbiBtb2R1bGUuZXhwb3J0cyBvciBleHBvcnRzLiosIFVzZSBFU00gZXhwb3J0IHN5bnRheCwgaW5zdGVhZDogJyArIG1vZHVsZS5pZCk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubm1kID0gKG1vZHVsZSkgPT4ge1xuXHRtb2R1bGUucGF0aHMgPSBbXTtcblx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRyZXR1cm4gbW9kdWxlO1xufTsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0XCJibG9ja1wiOiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IChjaHVua0lkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSAocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKChpZCkgPT4gKGluc3RhbGxlZENodW5rc1tpZF0gIT09IDApKSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt5b3V0b29sXCJdID0gc2VsZltcIndlYnBhY2tDaHVua3lvdXRvb2xcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubmMgPSB1bmRlZmluZWQ7IiwiIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgW1widmVuZG9yXCJdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2Jsb2NrLnRzeFwiKSkpXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIiwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9