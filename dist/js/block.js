/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/block/components/block/block.sass":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/block/components/block/block.sass ***!
  \****************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".youtool {\n  z-index: 10000;\n  opacity: 0;\n  position: fixed;\n  top: 0px;\n  left: 220px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  column-gap: 10px;\n  row-gap: 15px;\n  padding: 10px 15px;\n  border-radius: 10px;\n  backdrop-filter: blur(10px);\n  background: rgba(113, 88, 226, 0.3);\n  border: 3px solid #be2edd;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);\n  transition: 0.15s;\n}\n.youtool:hover {\n  opacity: 1;\n}\n.youtool-button {\n  cursor: pointer;\n  outline: none;\n  user-select: none;\n  border-radius: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 40px;\n  width: 40px;\n  font-size: 15px;\n  color: #fff;\n  text-shadow: 0 0 5px #be2edd;\n  font-weight: bold;\n  background: rgba(0, 0, 0, 0.3);\n  border: 2px solid rgba(190, 46, 221, 0.8);\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n  transition: 0.2s;\n}\n.youtool-button.active {\n  background: rgba(190, 46, 221, 0.3);\n  border: 2px solid #be2edd;\n  box-shadow: 0 0 5px #be2edd;\n}\n.youtool.no-transition {\n  transition: 0s;\n}\n.youtool.attach-top-left {\n  top: 0;\n  left: 220px;\n  bottom: unset;\n  right: unset;\n}\n.youtool.attach-bottom-left {\n  top: unset;\n  left: 0;\n  bottom: 0;\n  right: unset;\n}\n\n.active-speed {\n  user-select: none;\n  z-index: 10000;\n  position: fixed;\n  top: 20px;\n  left: 190px;\n  font-size: 15px;\n  font-weight: bold;\n  color: #cacaca;\n}", "",{"version":3,"sources":["webpack://./src/block/components/block/block.sass"],"names":[],"mappings":"AAAA;EACI,cAAA;EACA,UAAA;EACA,eAAA;EACA,QAAA;EACA,WAAA;EAEA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,gBAAA;EACA,aAAA;EACA,kBAAA;EACA,mBAAA;EAEA,2BAAA;EACA,mCAAA;EACA,yBAAA;EACA,uCAAA;EACA,iBAAA;AADJ;AAEI;EACI,UAAA;AAAR;AAEI;EACI,eAAA;EACA,aAAA;EACA,iBAAA;EACA,mBAAA;EACA,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,YAAA;EACA,WAAA;EACA,eAAA;EAEA,WAAA;EACA,4BAAA;EACA,iBAAA;EACA,8BAAA;EACA,yCAAA;EACA,uCAAA;EACA,gBAAA;AADR;AAGQ;EACI,mCAAA;EACA,yBAAA;EACA,2BAAA;AADZ;AAGI;EACI,cAAA;AADR;AAGI;EACI,MAAA;EACA,WAAA;EACA,aAAA;EACA,YAAA;AADR;AAEI;EACI,UAAA;EACA,OAAA;EACA,SAAA;EACA,YAAA;AAAR;;AAGA;EACI,iBAAA;EACA,cAAA;EACA,eAAA;EACA,SAAA;EACA,WAAA;EACA,eAAA;EACA,iBAAA;EACA,cAAA;AAAJ","sourcesContent":[".youtool\r\n    z-index: 10000\r\n    opacity: 0\r\n    position: fixed\r\n    top: 0px\r\n    left: 220px\r\n\r\n    display: flex\r\n    align-items: center\r\n    justify-content: center\r\n    column-gap: 10px\r\n    row-gap: 15px\r\n    padding: 10px 15px\r\n    border-radius: 10px\r\n\r\n    backdrop-filter: blur(10px)\r\n    background: rgba(113, 88, 226, 0.3)\r\n    border: 3px solid #be2edd\r\n    box-shadow: 0 0 10px rgba(#000, .4)\r\n    transition: .15s\r\n    &:hover\r\n        opacity: 1\r\n\r\n    &-button\r\n        cursor: pointer\r\n        outline: none\r\n        user-select: none\r\n        border-radius: 10px\r\n        display: flex\r\n        justify-content: center\r\n        align-items: center\r\n        height: 40px\r\n        width: 40px\r\n        font-size: 15px\r\n\r\n        color: #fff\r\n        text-shadow: 0 0 5px #be2edd\r\n        font-weight: bold\r\n        background: rgba(0, 0, 0, 0.3)\r\n        border: 2px solid rgba(#be2edd, 0.8)\r\n        box-shadow: 0 0 10px rgba(#000, .3)\r\n        transition: 0.2s\r\n\r\n        &.active\r\n            background: rgba(190, 46, 221, 0.3)\r\n            border: 2px solid #be2edd\r\n            box-shadow: 0 0 5px #be2edd\r\n\r\n    &.no-transition\r\n        transition: 0s\r\n\r\n    &.attach-top-left\r\n        top: 0\r\n        left: 220px\r\n        bottom: unset\r\n        right: unset\r\n    &.attach-bottom-left\r\n        top: unset\r\n        left: 0\r\n        bottom: 0\r\n        right: unset\r\n\r\n// Current video speed top left\r\n.active-speed\r\n    user-select: none\r\n    z-index: 10000\r\n    position: fixed\r\n    top: 20px\r\n    left: 190px\r\n    font-size: 15px\r\n    font-weight: bold\r\n    color: #cacaca\r\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./src/block/components/block/block.sass":
/*!***********************************************!*\
  !*** ./src/block/components/block/block.sass ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_block_sass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!./block.sass */ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/block/components/block/block.sass");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_block_sass__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_block_sass__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_block_sass__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_block_sass__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./src/block.tsx":
/*!***********************!*\
  !*** ./src/block.tsx ***!
  \***********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
const jsx_runtime_1 = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");
const client_1 = __webpack_require__(/*! react-dom/client */ "./node_modules/react-dom/client.js");
const block_1 = __webpack_require__(/*! @/block/components/block */ "./src/block/components/block/index.ts");
const create_root_element_1 = __webpack_require__(/*! @/utils/create-root-element */ "./src/utils/create-root-element.ts");
(0, create_root_element_1.createRootElement)("youtool");
const root = (0, client_1.createRoot)(document.getElementById("youtool"));
root.render((0, jsx_runtime_1.jsx)(block_1.Block, {}));


/***/ }),

/***/ "./src/block/components/block/block.tsx":
/*!**********************************************!*\
  !*** ./src/block/components/block/block.tsx ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Block = void 0;
const jsx_runtime_1 = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");
const react_1 = __webpack_require__(/*! react */ "./node_modules/react/index.js");
const react_draggable_1 = __importDefault(__webpack_require__(/*! react-draggable */ "./node_modules/react-draggable/build/cjs/cjs.js"));
const classnames_1 = __importDefault(__webpack_require__(/*! classnames */ "./node_modules/classnames/index.js"));
const default_speeds_1 = __webpack_require__(/*! @/constants/default-speeds */ "./src/constants/default-speeds.ts");
const use_video_spy_1 = __webpack_require__(/*! @/block/hooks/use-video-spy */ "./src/block/hooks/use-video-spy.ts");
const use_observer_1 = __webpack_require__(/*! @/block/hooks/use-observer */ "./src/block/hooks/use-observer.ts");
const get_item_1 = __webpack_require__(/*! @/chrome/storage/get-item */ "./src/chrome/storage/get-item.ts");
const set_item_1 = __webpack_require__(/*! @/chrome/storage/set-item */ "./src/chrome/storage/set-item.ts");
__webpack_require__(/*! ./block.sass */ "./src/block/components/block/block.sass");
const Block = () => {
    var _a, _b, _c, _d;
    const [storage, setStorage] = (0, react_1.useState)(default_speeds_1.DEFAULT_STORAGE);
    const [isDragging, setIsDragging] = (0, react_1.useState)(false);
    const [activeSpeed, setActiveSpeed] = (0, use_video_spy_1.useVideoSpy)();
    const { setBestQuality, loop, toggleLoop } = (0, use_observer_1.useObserver)();
    const onDrag = (event, { x, y }) => {
        setStorage((oldStorage) => ({ ...oldStorage, position: { x, y } }));
    };
    const onDragEnd = () => {
        setIsDragging(false);
        (0, set_item_1.setItem)("position", storage.position);
    };
    const isBlockAttached = Object.keys((_a = storage.attach) !== null && _a !== void 0 ? _a : {})
        .map((key) => { var _a; return ((_a = storage.attach) !== null && _a !== void 0 ? _a : {})[key]; })
        .find((item) => item);
    (0, react_1.useEffect)(() => {
        const loadSavedSettings = async () => {
            var _a;
            const originalStorage = await (0, get_item_1.getItem)(["speeds", "position", "attach", "loopButton"]);
            if (!originalStorage) {
                return;
            }
            if ((_a = originalStorage.speeds) === null || _a === void 0 ? void 0 : _a.length) {
                setStorage((oldStorage) => ({ ...oldStorage, speeds: originalStorage.speeds }));
            }
            if (originalStorage.position) {
                setStorage((oldStorage) => ({ ...oldStorage, position: originalStorage.position }));
            }
            if (originalStorage.attach) {
                setStorage((oldStorage) => ({ ...oldStorage, attach: originalStorage.attach }));
            }
            if (originalStorage.loopButton) {
                setStorage((oldStorage) => ({ ...oldStorage, loopButton: originalStorage.loopButton }));
            }
        };
        loadSavedSettings();
    }, []);
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)("div", { className: "active-speed", children: activeSpeed }), (0, jsx_runtime_1.jsx)("div", { onContextMenu: setBestQuality, children: (0, jsx_runtime_1.jsx)(react_draggable_1.default, { defaultPosition: storage.position, position: isBlockAttached ? undefined : storage.position, onDrag: onDrag, onStart: () => setIsDragging(true), onStop: onDragEnd, disabled: isBlockAttached, children: (0, jsx_runtime_1.jsxs)("div", { className: (0, classnames_1.default)("youtool", {
                            "no-transition": isDragging,
                            "attach-top-left": (_b = storage.attach) === null || _b === void 0 ? void 0 : _b.topLeft,
                            "attach-bottom-left": (_c = storage.attach) === null || _c === void 0 ? void 0 : _c.bottomLeft,
                        }), children: [(_d = storage.speeds) === null || _d === void 0 ? void 0 : _d.map((speed) => ((0, jsx_runtime_1.jsx)("button", { className: (0, classnames_1.default)("youtool-button", { active: activeSpeed === speed }), onClick: () => setActiveSpeed(speed), children: speed }, speed))), storage.loopButton && ((0, jsx_runtime_1.jsx)("button", { className: (0, classnames_1.default)("youtool-button", { active: loop }), onClick: toggleLoop, children: (0, jsx_runtime_1.jsx)("svg", { fill: "none", height: "24", viewBox: "0 0 24 24", width: "24", children: (0, jsx_runtime_1.jsx)("path", { d: "M7 7H17V10L21 6L17 2V5H5V11H7V7ZM17 17H7V14L3 18L7 22V19H19V13H17V17Z", fill: "white" }) }) }))] }) }) })] }));
};
exports.Block = Block;


/***/ }),

/***/ "./src/block/components/block/index.ts":
/*!*********************************************!*\
  !*** ./src/block/components/block/index.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.Block = void 0;
var block_1 = __webpack_require__(/*! ./block */ "./src/block/components/block/block.tsx");
Object.defineProperty(exports, "Block", ({ enumerable: true, get: function () { return block_1.Block; } }));


/***/ }),

/***/ "./src/block/hooks/use-observer.ts":
/*!*****************************************!*\
  !*** ./src/block/hooks/use-observer.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.useObserver = void 0;
const react_1 = __webpack_require__(/*! react */ "./node_modules/react/index.js");
const CLASSES = {
    SETTING_OPTIONS: ".ytp-settings-menu .ytp-panel-menu .ytp-menuitem[role='menuitem']",
    BEST_QUALITY_BUTTON: ".ytp-quality-menu .ytp-panel-menu .ytp-menuitem",
    SETTINGS_BUTTON: ".ytp-settings-button",
    LOOP_BUTTON: ".ytp-contextmenu .ytp-menuitem",
    PLAYER: ".html5-video-player",
};
const useObserver = () => {
    const [loop, setLoop] = (0, react_1.useState)(false);
    const observer = (0, react_1.useRef)(null);
    const loopObserver = (0, react_1.useRef)(null);
    (0, react_1.useEffect)(() => {
        loopObserver.current = new MutationObserver(onLoopMutate);
        loopObserver.current.observe(document, { childList: true, subtree: true });
    }, []);
    const setBestQuality = (event) => {
        var _a;
        event.preventDefault();
        const onMutate = (mutations, observer) => {
            mutations.forEach(async ({ target }) => {
                if (!(target instanceof HTMLElement))
                    return;
                const settingsOptions = target.querySelectorAll(CLASSES.SETTING_OPTIONS);
                if (settingsOptions.length) {
                    const qualityButton = Array.from(settingsOptions).at(-1);
                    if (qualityButton instanceof HTMLElement) {
                        qualityButton.click();
                    }
                    return;
                }
                const bestQuality = document.querySelector(CLASSES.BEST_QUALITY_BUTTON);
                if (bestQuality instanceof HTMLElement) {
                    bestQuality.click();
                    observer.disconnect();
                }
            });
        };
        // If observer already running stop it (anti-spam)
        (_a = observer.current) === null || _a === void 0 ? void 0 : _a.disconnect();
        observer.current = new MutationObserver(onMutate);
        observer.current.observe(document, { childList: true, subtree: true });
        setTimeout(observer.current.disconnect, 3000);
        const settingsButton = document.querySelector(CLASSES.SETTINGS_BUTTON);
        if (settingsButton) {
            settingsButton.click();
        }
        // Imitate mutation when user change video speed
        onMutate([{ target: document.body }], observer.current);
    };
    function onLoopMutate(mutations) {
        mutations.forEach(async () => {
            var _a;
            const isEnabled = ((_a = document.querySelector(CLASSES.LOOP_BUTTON)) === null || _a === void 0 ? void 0 : _a.getAttribute("aria-checked")) === "true";
            setLoop(isEnabled);
        });
    }
    const toggleLoop = () => {
        const player = document.querySelector(CLASSES.PLAYER);
        if (player) {
            player.dispatchEvent(new MouseEvent("contextmenu", { bubbles: true, cancelable: true, button: 2 }));
            setTimeout(() => { var _a; return (_a = document.querySelector(CLASSES.LOOP_BUTTON)) === null || _a === void 0 ? void 0 : _a.click(); }, 50);
        }
    };
    return { setBestQuality, loop, toggleLoop };
};
exports.useObserver = useObserver;


/***/ }),

/***/ "./src/block/hooks/use-video-spy.ts":
/*!******************************************!*\
  !*** ./src/block/hooks/use-video-spy.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.useVideoSpy = void 0;
const react_1 = __webpack_require__(/*! react */ "./node_modules/react/index.js");
const useVideoSpy = () => {
    const [activeSpeed, setActiveSpeed] = (0, react_1.useState)(1);
    const observer = (0, react_1.useRef)(null);
    (0, react_1.useEffect)(() => {
        const onPlayBackRateChange = ({ target }) => {
            if (!(target instanceof HTMLVideoElement))
                return;
            // For fixing bug. When user change active tab or resize browser window, Youtube set playbackRate = 0
            if (target.playbackRate === 1)
                return;
            setActiveSpeed(target.playbackRate);
        };
        const onMutate = (mutations) => {
            mutations.forEach(({ target, addedNodes, removedNodes }) => {
                if (!(target instanceof HTMLElement))
                    return;
                const videos = target.querySelectorAll("video");
                if (!videos.length)
                    return;
                videos.forEach((video) => {
                    video.playbackRate = activeSpeed;
                    if (addedNodes === null || addedNodes === void 0 ? void 0 : addedNodes.length) {
                        video.addEventListener("ratechange", onPlayBackRateChange);
                    }
                    if (removedNodes === null || removedNodes === void 0 ? void 0 : removedNodes.length) {
                        video.removeEventListener("ratechange", onPlayBackRateChange);
                    }
                });
            });
        };
        observer.current = new MutationObserver(onMutate);
        observer.current.observe(document, { childList: true, subtree: true });
        // Imitate mutation when user change video speed
        onMutate([{ target: document.body }]);
        return () => {
            if (observer.current) {
                observer.current.disconnect();
            }
        };
    }, [activeSpeed]);
    return [activeSpeed, setActiveSpeed];
};
exports.useVideoSpy = useVideoSpy;


/***/ }),

/***/ "./src/chrome/storage/get-item.ts":
/*!****************************************!*\
  !*** ./src/chrome/storage/get-item.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.getItem = void 0;
const getItem = async (names) => {
    try {
        const value = await chrome.storage.sync.get(names);
        return value;
    }
    catch {
        return null;
    }
};
exports.getItem = getItem;


/***/ }),

/***/ "./src/chrome/storage/set-item.ts":
/*!****************************************!*\
  !*** ./src/chrome/storage/set-item.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.setItem = void 0;
const setItem = async (name, value) => chrome.storage.sync.set({ [name]: value });
exports.setItem = setItem;


/***/ }),

/***/ "./src/constants/default-speeds.ts":
/*!*****************************************!*\
  !*** ./src/constants/default-speeds.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.DEFAULT_STORAGE = exports.DEFAULT_SPEEDS = void 0;
exports.DEFAULT_SPEEDS = [1, 1.5, 2, 2.5, 3, 5];
exports.DEFAULT_STORAGE = {
    attach: { topLeft: true, bottomLeft: false },
    speeds: exports.DEFAULT_SPEEDS,
    loopButton: true,
    position: { x: 0, y: 0 },
};


/***/ }),

/***/ "./src/utils/create-root-element.ts":
/*!******************************************!*\
  !*** ./src/utils/create-root-element.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.createRootElement = void 0;
const createRootElement = (id = "root") => {
    const rootElement = document.createElement("section");
    rootElement.id = id;
    document.body.append(rootElement);
};
exports.createRootElement = createRootElement;


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	(() => {
/******/ 		var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);
/******/ 		var leafPrototypes;
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 16: return value when it's Promise-like
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if(typeof value === 'object' && value) {
/******/ 				if((mode & 4) && value.__esModule) return value;
/******/ 				if((mode & 16) && typeof value.then === 'function') return value;
/******/ 			}
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
/******/ 			for(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {
/******/ 				Object.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));
/******/ 			}
/******/ 			def['default'] = () => (value);
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/harmony module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.hmd = (module) => {
/******/ 			module = Object.create(module);
/******/ 			if (!module.children) module.children = [];
/******/ 			Object.defineProperty(module, 'exports', {
/******/ 				enumerable: true,
/******/ 				set: () => {
/******/ 					throw new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);
/******/ 				}
/******/ 			});
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"block": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkyoutool"] = self["webpackChunkyoutool"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["vendor"], () => (__webpack_require__("./src/block.tsx")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHO1dBQ0g7V0FDQTtXQUNBLENBQUM7Ozs7O1dDUEQ7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLEVBQUU7V0FDRjtXQUNBOzs7OztXQ1ZBOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RDs7Ozs7V0NOQTtXQUNBO1dBQ0E7V0FDQTtXQUNBOzs7OztXQ0pBOztXQUVBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTs7V0FFQTs7V0FFQTs7V0FFQTs7V0FFQTs7V0FFQTs7V0FFQTs7V0FFQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxNQUFNLHFCQUFxQjtXQUMzQjtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBOztXQUVBO1dBQ0E7V0FDQTs7Ozs7V0NoREE7Ozs7O1VFQUE7VUFDQTtVQUNBO1VBQ0E7VUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3lvdXRvb2wvLi9zcmMvYmxvY2svY29tcG9uZW50cy9ibG9jay9ibG9jay5zYXNzIiwid2VicGFjazovL3lvdXRvb2wvLi9zcmMvYmxvY2svY29tcG9uZW50cy9ibG9jay9ibG9jay5zYXNzPzUxMTAiLCJ3ZWJwYWNrOi8veW91dG9vbC8uL3NyYy9ibG9jay50c3giLCJ3ZWJwYWNrOi8veW91dG9vbC8uL3NyYy9ibG9jay9jb21wb25lbnRzL2Jsb2NrL2Jsb2NrLnRzeCIsIndlYnBhY2s6Ly95b3V0b29sLy4vc3JjL2Jsb2NrL2NvbXBvbmVudHMvYmxvY2svaW5kZXgudHMiLCJ3ZWJwYWNrOi8veW91dG9vbC8uL3NyYy9ibG9jay9ob29rcy91c2Utb2JzZXJ2ZXIudHMiLCJ3ZWJwYWNrOi8veW91dG9vbC8uL3NyYy9ibG9jay9ob29rcy91c2UtdmlkZW8tc3B5LnRzIiwid2VicGFjazovL3lvdXRvb2wvLi9zcmMvY2hyb21lL3N0b3JhZ2UvZ2V0LWl0ZW0udHMiLCJ3ZWJwYWNrOi8veW91dG9vbC8uL3NyYy9jaHJvbWUvc3RvcmFnZS9zZXQtaXRlbS50cyIsIndlYnBhY2s6Ly95b3V0b29sLy4vc3JjL2NvbnN0YW50cy9kZWZhdWx0LXNwZWVkcy50cyIsIndlYnBhY2s6Ly95b3V0b29sLy4vc3JjL3V0aWxzL2NyZWF0ZS1yb290LWVsZW1lbnQudHMiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svcnVudGltZS9jcmVhdGUgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3lvdXRvb2wvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3lvdXRvb2wvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svcnVudGltZS9oYXJtb255IG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3lvdXRvb2wvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svcnVudGltZS9ub2RlIG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly95b3V0b29sL3dlYnBhY2svYmVmb3JlLXN0YXJ0dXAiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8veW91dG9vbC93ZWJwYWNrL2FmdGVyLXN0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCIueW91dG9vbCB7XFxuICB6LWluZGV4OiAxMDAwMDtcXG4gIG9wYWNpdHk6IDA7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICB0b3A6IDBweDtcXG4gIGxlZnQ6IDIyMHB4O1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGNvbHVtbi1nYXA6IDEwcHg7XFxuICByb3ctZ2FwOiAxNXB4O1xcbiAgcGFkZGluZzogMTBweCAxNXB4O1xcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcXG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMTEzLCA4OCwgMjI2LCAwLjMpO1xcbiAgYm9yZGVyOiAzcHggc29saWQgI2JlMmVkZDtcXG4gIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC40KTtcXG4gIHRyYW5zaXRpb246IDAuMTVzO1xcbn1cXG4ueW91dG9vbDpob3ZlciB7XFxuICBvcGFjaXR5OiAxO1xcbn1cXG4ueW91dG9vbC1idXR0b24ge1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgb3V0bGluZTogbm9uZTtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBoZWlnaHQ6IDQwcHg7XFxuICB3aWR0aDogNDBweDtcXG4gIGZvbnQtc2l6ZTogMTVweDtcXG4gIGNvbG9yOiAjZmZmO1xcbiAgdGV4dC1zaGFkb3c6IDAgMCA1cHggI2JlMmVkZDtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjMpO1xcbiAgYm9yZGVyOiAycHggc29saWQgcmdiYSgxOTAsIDQ2LCAyMjEsIDAuOCk7XFxuICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMyk7XFxuICB0cmFuc2l0aW9uOiAwLjJzO1xcbn1cXG4ueW91dG9vbC1idXR0b24uYWN0aXZlIHtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMTkwLCA0NiwgMjIxLCAwLjMpO1xcbiAgYm9yZGVyOiAycHggc29saWQgI2JlMmVkZDtcXG4gIGJveC1zaGFkb3c6IDAgMCA1cHggI2JlMmVkZDtcXG59XFxuLnlvdXRvb2wubm8tdHJhbnNpdGlvbiB7XFxuICB0cmFuc2l0aW9uOiAwcztcXG59XFxuLnlvdXRvb2wuYXR0YWNoLXRvcC1sZWZ0IHtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDIyMHB4O1xcbiAgYm90dG9tOiB1bnNldDtcXG4gIHJpZ2h0OiB1bnNldDtcXG59XFxuLnlvdXRvb2wuYXR0YWNoLWJvdHRvbS1sZWZ0IHtcXG4gIHRvcDogdW5zZXQ7XFxuICBsZWZ0OiAwO1xcbiAgYm90dG9tOiAwO1xcbiAgcmlnaHQ6IHVuc2V0O1xcbn1cXG5cXG4uYWN0aXZlLXNwZWVkIHtcXG4gIHVzZXItc2VsZWN0OiBub25lO1xcbiAgei1pbmRleDogMTAwMDA7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICB0b3A6IDIwcHg7XFxuICBsZWZ0OiAxOTBweDtcXG4gIGZvbnQtc2l6ZTogMTVweDtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgY29sb3I6ICNjYWNhY2E7XFxufVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9ibG9jay9jb21wb25lbnRzL2Jsb2NrL2Jsb2NrLnNhc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDSSxjQUFBO0VBQ0EsVUFBQTtFQUNBLGVBQUE7RUFDQSxRQUFBO0VBQ0EsV0FBQTtFQUVBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtFQUVBLDJCQUFBO0VBQ0EsbUNBQUE7RUFDQSx5QkFBQTtFQUNBLHVDQUFBO0VBQ0EsaUJBQUE7QUFESjtBQUVJO0VBQ0ksVUFBQTtBQUFSO0FBRUk7RUFDSSxlQUFBO0VBQ0EsYUFBQTtFQUNBLGlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtFQUVBLFdBQUE7RUFDQSw0QkFBQTtFQUNBLGlCQUFBO0VBQ0EsOEJBQUE7RUFDQSx5Q0FBQTtFQUNBLHVDQUFBO0VBQ0EsZ0JBQUE7QUFEUjtBQUdRO0VBQ0ksbUNBQUE7RUFDQSx5QkFBQTtFQUNBLDJCQUFBO0FBRFo7QUFHSTtFQUNJLGNBQUE7QUFEUjtBQUdJO0VBQ0ksTUFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0EsWUFBQTtBQURSO0FBRUk7RUFDSSxVQUFBO0VBQ0EsT0FBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0FBQVI7O0FBR0E7RUFDSSxpQkFBQTtFQUNBLGNBQUE7RUFDQSxlQUFBO0VBQ0EsU0FBQTtFQUNBLFdBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxjQUFBO0FBQUpcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLnlvdXRvb2xcXHJcXG4gICAgei1pbmRleDogMTAwMDBcXHJcXG4gICAgb3BhY2l0eTogMFxcclxcbiAgICBwb3NpdGlvbjogZml4ZWRcXHJcXG4gICAgdG9wOiAwcHhcXHJcXG4gICAgbGVmdDogMjIwcHhcXHJcXG5cXHJcXG4gICAgZGlzcGxheTogZmxleFxcclxcbiAgICBhbGlnbi1pdGVtczogY2VudGVyXFxyXFxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyXFxyXFxuICAgIGNvbHVtbi1nYXA6IDEwcHhcXHJcXG4gICAgcm93LWdhcDogMTVweFxcclxcbiAgICBwYWRkaW5nOiAxMHB4IDE1cHhcXHJcXG4gICAgYm9yZGVyLXJhZGl1czogMTBweFxcclxcblxcclxcbiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweClcXHJcXG4gICAgYmFja2dyb3VuZDogcmdiYSgxMTMsIDg4LCAyMjYsIDAuMylcXHJcXG4gICAgYm9yZGVyOiAzcHggc29saWQgI2JlMmVkZFxcclxcbiAgICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKCMwMDAsIC40KVxcclxcbiAgICB0cmFuc2l0aW9uOiAuMTVzXFxyXFxuICAgICY6aG92ZXJcXHJcXG4gICAgICAgIG9wYWNpdHk6IDFcXHJcXG5cXHJcXG4gICAgJi1idXR0b25cXHJcXG4gICAgICAgIGN1cnNvcjogcG9pbnRlclxcclxcbiAgICAgICAgb3V0bGluZTogbm9uZVxcclxcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmVcXHJcXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHhcXHJcXG4gICAgICAgIGRpc3BsYXk6IGZsZXhcXHJcXG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyXFxyXFxuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyXFxyXFxuICAgICAgICBoZWlnaHQ6IDQwcHhcXHJcXG4gICAgICAgIHdpZHRoOiA0MHB4XFxyXFxuICAgICAgICBmb250LXNpemU6IDE1cHhcXHJcXG5cXHJcXG4gICAgICAgIGNvbG9yOiAjZmZmXFxyXFxuICAgICAgICB0ZXh0LXNoYWRvdzogMCAwIDVweCAjYmUyZWRkXFxyXFxuICAgICAgICBmb250LXdlaWdodDogYm9sZFxcclxcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjMpXFxyXFxuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCByZ2JhKCNiZTJlZGQsIDAuOClcXHJcXG4gICAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoIzAwMCwgLjMpXFxyXFxuICAgICAgICB0cmFuc2l0aW9uOiAwLjJzXFxyXFxuXFxyXFxuICAgICAgICAmLmFjdGl2ZVxcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMTkwLCA0NiwgMjIxLCAwLjMpXFxyXFxuICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgI2JlMmVkZFxcclxcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCA1cHggI2JlMmVkZFxcclxcblxcclxcbiAgICAmLm5vLXRyYW5zaXRpb25cXHJcXG4gICAgICAgIHRyYW5zaXRpb246IDBzXFxyXFxuXFxyXFxuICAgICYuYXR0YWNoLXRvcC1sZWZ0XFxyXFxuICAgICAgICB0b3A6IDBcXHJcXG4gICAgICAgIGxlZnQ6IDIyMHB4XFxyXFxuICAgICAgICBib3R0b206IHVuc2V0XFxyXFxuICAgICAgICByaWdodDogdW5zZXRcXHJcXG4gICAgJi5hdHRhY2gtYm90dG9tLWxlZnRcXHJcXG4gICAgICAgIHRvcDogdW5zZXRcXHJcXG4gICAgICAgIGxlZnQ6IDBcXHJcXG4gICAgICAgIGJvdHRvbTogMFxcclxcbiAgICAgICAgcmlnaHQ6IHVuc2V0XFxyXFxuXFxyXFxuLy8gQ3VycmVudCB2aWRlbyBzcGVlZCB0b3AgbGVmdFxcclxcbi5hY3RpdmUtc3BlZWRcXHJcXG4gICAgdXNlci1zZWxlY3Q6IG5vbmVcXHJcXG4gICAgei1pbmRleDogMTAwMDBcXHJcXG4gICAgcG9zaXRpb246IGZpeGVkXFxyXFxuICAgIHRvcDogMjBweFxcclxcbiAgICBsZWZ0OiAxOTBweFxcclxcbiAgICBmb250LXNpemU6IDE1cHhcXHJcXG4gICAgZm9udC13ZWlnaHQ6IGJvbGRcXHJcXG4gICAgY29sb3I6ICNjYWNhY2FcXHJcXG5cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICBpbXBvcnQgZG9tQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0U3R5bGVFbGVtZW50IGZyb20gXCIhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanMhLi9ibG9jay5zYXNzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vYmxvY2suc2Fzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGpzeF9ydW50aW1lXzEgPSByZXF1aXJlKFwicmVhY3QvanN4LXJ1bnRpbWVcIik7XHJcbmNvbnN0IGNsaWVudF8xID0gcmVxdWlyZShcInJlYWN0LWRvbS9jbGllbnRcIik7XHJcbmNvbnN0IGJsb2NrXzEgPSByZXF1aXJlKFwiQC9ibG9jay9jb21wb25lbnRzL2Jsb2NrXCIpO1xyXG5jb25zdCBjcmVhdGVfcm9vdF9lbGVtZW50XzEgPSByZXF1aXJlKFwiQC91dGlscy9jcmVhdGUtcm9vdC1lbGVtZW50XCIpO1xyXG4oMCwgY3JlYXRlX3Jvb3RfZWxlbWVudF8xLmNyZWF0ZVJvb3RFbGVtZW50KShcInlvdXRvb2xcIik7XHJcbmNvbnN0IHJvb3QgPSAoMCwgY2xpZW50XzEuY3JlYXRlUm9vdCkoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ5b3V0b29sXCIpKTtcclxucm9vdC5yZW5kZXIoKDAsIGpzeF9ydW50aW1lXzEuanN4KShibG9ja18xLkJsb2NrLCB7fSkpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkJsb2NrID0gdm9pZCAwO1xyXG5jb25zdCBqc3hfcnVudGltZV8xID0gcmVxdWlyZShcInJlYWN0L2pzeC1ydW50aW1lXCIpO1xyXG5jb25zdCByZWFjdF8xID0gcmVxdWlyZShcInJlYWN0XCIpO1xyXG5jb25zdCByZWFjdF9kcmFnZ2FibGVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicmVhY3QtZHJhZ2dhYmxlXCIpKTtcclxuY29uc3QgY2xhc3NuYW1lc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJjbGFzc25hbWVzXCIpKTtcclxuY29uc3QgZGVmYXVsdF9zcGVlZHNfMSA9IHJlcXVpcmUoXCJAL2NvbnN0YW50cy9kZWZhdWx0LXNwZWVkc1wiKTtcclxuY29uc3QgdXNlX3ZpZGVvX3NweV8xID0gcmVxdWlyZShcIkAvYmxvY2svaG9va3MvdXNlLXZpZGVvLXNweVwiKTtcclxuY29uc3QgdXNlX29ic2VydmVyXzEgPSByZXF1aXJlKFwiQC9ibG9jay9ob29rcy91c2Utb2JzZXJ2ZXJcIik7XHJcbmNvbnN0IGdldF9pdGVtXzEgPSByZXF1aXJlKFwiQC9jaHJvbWUvc3RvcmFnZS9nZXQtaXRlbVwiKTtcclxuY29uc3Qgc2V0X2l0ZW1fMSA9IHJlcXVpcmUoXCJAL2Nocm9tZS9zdG9yYWdlL3NldC1pdGVtXCIpO1xyXG5yZXF1aXJlKFwiLi9ibG9jay5zYXNzXCIpO1xyXG5jb25zdCBCbG9jayA9ICgpID0+IHtcclxuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcclxuICAgIGNvbnN0IFtzdG9yYWdlLCBzZXRTdG9yYWdlXSA9ICgwLCByZWFjdF8xLnVzZVN0YXRlKShkZWZhdWx0X3NwZWVkc18xLkRFRkFVTFRfU1RPUkFHRSk7XHJcbiAgICBjb25zdCBbaXNEcmFnZ2luZywgc2V0SXNEcmFnZ2luZ10gPSAoMCwgcmVhY3RfMS51c2VTdGF0ZSkoZmFsc2UpO1xyXG4gICAgY29uc3QgW2FjdGl2ZVNwZWVkLCBzZXRBY3RpdmVTcGVlZF0gPSAoMCwgdXNlX3ZpZGVvX3NweV8xLnVzZVZpZGVvU3B5KSgpO1xyXG4gICAgY29uc3QgeyBzZXRCZXN0UXVhbGl0eSwgbG9vcCwgdG9nZ2xlTG9vcCB9ID0gKDAsIHVzZV9vYnNlcnZlcl8xLnVzZU9ic2VydmVyKSgpO1xyXG4gICAgY29uc3Qgb25EcmFnID0gKGV2ZW50LCB7IHgsIHkgfSkgPT4ge1xyXG4gICAgICAgIHNldFN0b3JhZ2UoKG9sZFN0b3JhZ2UpID0+ICh7IC4uLm9sZFN0b3JhZ2UsIHBvc2l0aW9uOiB7IHgsIHkgfSB9KSk7XHJcbiAgICB9O1xyXG4gICAgY29uc3Qgb25EcmFnRW5kID0gKCkgPT4ge1xyXG4gICAgICAgIHNldElzRHJhZ2dpbmcoZmFsc2UpO1xyXG4gICAgICAgICgwLCBzZXRfaXRlbV8xLnNldEl0ZW0pKFwicG9zaXRpb25cIiwgc3RvcmFnZS5wb3NpdGlvbik7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaXNCbG9ja0F0dGFjaGVkID0gT2JqZWN0LmtleXMoKF9hID0gc3RvcmFnZS5hdHRhY2gpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KVxyXG4gICAgICAgIC5tYXAoKGtleSkgPT4geyB2YXIgX2E7IHJldHVybiAoKF9hID0gc3RvcmFnZS5hdHRhY2gpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KVtrZXldOyB9KVxyXG4gICAgICAgIC5maW5kKChpdGVtKSA9PiBpdGVtKTtcclxuICAgICgwLCByZWFjdF8xLnVzZUVmZmVjdCkoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGxvYWRTYXZlZFNldHRpbmdzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsU3RvcmFnZSA9IGF3YWl0ICgwLCBnZXRfaXRlbV8xLmdldEl0ZW0pKFtcInNwZWVkc1wiLCBcInBvc2l0aW9uXCIsIFwiYXR0YWNoXCIsIFwibG9vcEJ1dHRvblwiXSk7XHJcbiAgICAgICAgICAgIGlmICghb3JpZ2luYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChfYSA9IG9yaWdpbmFsU3RvcmFnZS5zcGVlZHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHNldFN0b3JhZ2UoKG9sZFN0b3JhZ2UpID0+ICh7IC4uLm9sZFN0b3JhZ2UsIHNwZWVkczogb3JpZ2luYWxTdG9yYWdlLnNwZWVkcyB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsU3RvcmFnZS5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgc2V0U3RvcmFnZSgob2xkU3RvcmFnZSkgPT4gKHsgLi4ub2xkU3RvcmFnZSwgcG9zaXRpb246IG9yaWdpbmFsU3RvcmFnZS5wb3NpdGlvbiB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsU3RvcmFnZS5hdHRhY2gpIHtcclxuICAgICAgICAgICAgICAgIHNldFN0b3JhZ2UoKG9sZFN0b3JhZ2UpID0+ICh7IC4uLm9sZFN0b3JhZ2UsIGF0dGFjaDogb3JpZ2luYWxTdG9yYWdlLmF0dGFjaCB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsU3RvcmFnZS5sb29wQnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRTdG9yYWdlKChvbGRTdG9yYWdlKSA9PiAoeyAuLi5vbGRTdG9yYWdlLCBsb29wQnV0dG9uOiBvcmlnaW5hbFN0b3JhZ2UubG9vcEJ1dHRvbiB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxvYWRTYXZlZFNldHRpbmdzKCk7XHJcbiAgICB9LCBbXSk7XHJcbiAgICByZXR1cm4gKCgwLCBqc3hfcnVudGltZV8xLmpzeHMpKGpzeF9ydW50aW1lXzEuRnJhZ21lbnQsIHsgY2hpbGRyZW46IFsoMCwganN4X3J1bnRpbWVfMS5qc3gpKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImFjdGl2ZS1zcGVlZFwiLCBjaGlsZHJlbjogYWN0aXZlU3BlZWQgfSksICgwLCBqc3hfcnVudGltZV8xLmpzeCkoXCJkaXZcIiwgeyBvbkNvbnRleHRNZW51OiBzZXRCZXN0UXVhbGl0eSwgY2hpbGRyZW46ICgwLCBqc3hfcnVudGltZV8xLmpzeCkocmVhY3RfZHJhZ2dhYmxlXzEuZGVmYXVsdCwgeyBkZWZhdWx0UG9zaXRpb246IHN0b3JhZ2UucG9zaXRpb24sIHBvc2l0aW9uOiBpc0Jsb2NrQXR0YWNoZWQgPyB1bmRlZmluZWQgOiBzdG9yYWdlLnBvc2l0aW9uLCBvbkRyYWc6IG9uRHJhZywgb25TdGFydDogKCkgPT4gc2V0SXNEcmFnZ2luZyh0cnVlKSwgb25TdG9wOiBvbkRyYWdFbmQsIGRpc2FibGVkOiBpc0Jsb2NrQXR0YWNoZWQsIGNoaWxkcmVuOiAoMCwganN4X3J1bnRpbWVfMS5qc3hzKShcImRpdlwiLCB7IGNsYXNzTmFtZTogKDAsIGNsYXNzbmFtZXNfMS5kZWZhdWx0KShcInlvdXRvb2xcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuby10cmFuc2l0aW9uXCI6IGlzRHJhZ2dpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImF0dGFjaC10b3AtbGVmdFwiOiAoX2IgPSBzdG9yYWdlLmF0dGFjaCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRvcExlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImF0dGFjaC1ib3R0b20tbGVmdFwiOiAoX2MgPSBzdG9yYWdlLmF0dGFjaCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmJvdHRvbUxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBjaGlsZHJlbjogWyhfZCA9IHN0b3JhZ2Uuc3BlZWRzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QubWFwKChzcGVlZCkgPT4gKCgwLCBqc3hfcnVudGltZV8xLmpzeCkoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6ICgwLCBjbGFzc25hbWVzXzEuZGVmYXVsdCkoXCJ5b3V0b29sLWJ1dHRvblwiLCB7IGFjdGl2ZTogYWN0aXZlU3BlZWQgPT09IHNwZWVkIH0pLCBvbkNsaWNrOiAoKSA9PiBzZXRBY3RpdmVTcGVlZChzcGVlZCksIGNoaWxkcmVuOiBzcGVlZCB9LCBzcGVlZCkpKSwgc3RvcmFnZS5sb29wQnV0dG9uICYmICgoMCwganN4X3J1bnRpbWVfMS5qc3gpKFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiAoMCwgY2xhc3NuYW1lc18xLmRlZmF1bHQpKFwieW91dG9vbC1idXR0b25cIiwgeyBhY3RpdmU6IGxvb3AgfSksIG9uQ2xpY2s6IHRvZ2dsZUxvb3AsIGNoaWxkcmVuOiAoMCwganN4X3J1bnRpbWVfMS5qc3gpKFwic3ZnXCIsIHsgZmlsbDogXCJub25lXCIsIGhlaWdodDogXCIyNFwiLCB2aWV3Qm94OiBcIjAgMCAyNCAyNFwiLCB3aWR0aDogXCIyNFwiLCBjaGlsZHJlbjogKDAsIGpzeF9ydW50aW1lXzEuanN4KShcInBhdGhcIiwgeyBkOiBcIk03IDdIMTdWMTBMMjEgNkwxNyAyVjVINVYxMUg3VjdaTTE3IDE3SDdWMTRMMyAxOEw3IDIyVjE5SDE5VjEzSDE3VjE3WlwiLCBmaWxsOiBcIndoaXRlXCIgfSkgfSkgfSkpXSB9KSB9KSB9KV0gfSkpO1xyXG59O1xyXG5leHBvcnRzLkJsb2NrID0gQmxvY2s7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQmxvY2sgPSB2b2lkIDA7XHJcbnZhciBibG9ja18xID0gcmVxdWlyZShcIi4vYmxvY2tcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkJsb2NrXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBibG9ja18xLkJsb2NrOyB9IH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnVzZU9ic2VydmVyID0gdm9pZCAwO1xyXG5jb25zdCByZWFjdF8xID0gcmVxdWlyZShcInJlYWN0XCIpO1xyXG5jb25zdCBDTEFTU0VTID0ge1xyXG4gICAgU0VUVElOR19PUFRJT05TOiBcIi55dHAtc2V0dGluZ3MtbWVudSAueXRwLXBhbmVsLW1lbnUgLnl0cC1tZW51aXRlbVtyb2xlPSdtZW51aXRlbSddXCIsXHJcbiAgICBCRVNUX1FVQUxJVFlfQlVUVE9OOiBcIi55dHAtcXVhbGl0eS1tZW51IC55dHAtcGFuZWwtbWVudSAueXRwLW1lbnVpdGVtXCIsXHJcbiAgICBTRVRUSU5HU19CVVRUT046IFwiLnl0cC1zZXR0aW5ncy1idXR0b25cIixcclxuICAgIExPT1BfQlVUVE9OOiBcIi55dHAtY29udGV4dG1lbnUgLnl0cC1tZW51aXRlbVwiLFxyXG4gICAgUExBWUVSOiBcIi5odG1sNS12aWRlby1wbGF5ZXJcIixcclxufTtcclxuY29uc3QgdXNlT2JzZXJ2ZXIgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBbbG9vcCwgc2V0TG9vcF0gPSAoMCwgcmVhY3RfMS51c2VTdGF0ZSkoZmFsc2UpO1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSAoMCwgcmVhY3RfMS51c2VSZWYpKG51bGwpO1xyXG4gICAgY29uc3QgbG9vcE9ic2VydmVyID0gKDAsIHJlYWN0XzEudXNlUmVmKShudWxsKTtcclxuICAgICgwLCByZWFjdF8xLnVzZUVmZmVjdCkoKCkgPT4ge1xyXG4gICAgICAgIGxvb3BPYnNlcnZlci5jdXJyZW50ID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIob25Mb29wTXV0YXRlKTtcclxuICAgICAgICBsb29wT2JzZXJ2ZXIuY3VycmVudC5vYnNlcnZlKGRvY3VtZW50LCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTtcclxuICAgIH0sIFtdKTtcclxuICAgIGNvbnN0IHNldEJlc3RRdWFsaXR5ID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3Qgb25NdXRhdGUgPSAobXV0YXRpb25zLCBvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChhc3luYyAoeyB0YXJnZXQgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzT3B0aW9ucyA9IHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKENMQVNTRVMuU0VUVElOR19PUFRJT05TKTtcclxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc09wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVhbGl0eUJ1dHRvbiA9IEFycmF5LmZyb20oc2V0dGluZ3NPcHRpb25zKS5hdCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1YWxpdHlCdXR0b24gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWFsaXR5QnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGJlc3RRdWFsaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihDTEFTU0VTLkJFU1RfUVVBTElUWV9CVVRUT04pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJlc3RRdWFsaXR5IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBiZXN0UXVhbGl0eS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBJZiBvYnNlcnZlciBhbHJlYWR5IHJ1bm5pbmcgc3RvcCBpdCAoYW50aS1zcGFtKVxyXG4gICAgICAgIChfYSA9IG9ic2VydmVyLmN1cnJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgb2JzZXJ2ZXIuY3VycmVudCA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG9uTXV0YXRlKTtcclxuICAgICAgICBvYnNlcnZlci5jdXJyZW50Lm9ic2VydmUoZG9jdW1lbnQsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xyXG4gICAgICAgIHNldFRpbWVvdXQob2JzZXJ2ZXIuY3VycmVudC5kaXNjb25uZWN0LCAzMDAwKTtcclxuICAgICAgICBjb25zdCBzZXR0aW5nc0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoQ0xBU1NFUy5TRVRUSU5HU19CVVRUT04pO1xyXG4gICAgICAgIGlmIChzZXR0aW5nc0J1dHRvbikge1xyXG4gICAgICAgICAgICBzZXR0aW5nc0J1dHRvbi5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJbWl0YXRlIG11dGF0aW9uIHdoZW4gdXNlciBjaGFuZ2UgdmlkZW8gc3BlZWRcclxuICAgICAgICBvbk11dGF0ZShbeyB0YXJnZXQ6IGRvY3VtZW50LmJvZHkgfV0sIG9ic2VydmVyLmN1cnJlbnQpO1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIG9uTG9vcE11dGF0ZShtdXRhdGlvbnMpIHtcclxuICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgY29uc3QgaXNFbmFibGVkID0gKChfYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoQ0xBU1NFUy5MT09QX0JVVFRPTikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRBdHRyaWJ1dGUoXCJhcmlhLWNoZWNrZWRcIikpID09PSBcInRydWVcIjtcclxuICAgICAgICAgICAgc2V0TG9vcChpc0VuYWJsZWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdG9nZ2xlTG9vcCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBwbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKENMQVNTRVMuUExBWUVSKTtcclxuICAgICAgICBpZiAocGxheWVyKSB7XHJcbiAgICAgICAgICAgIHBsYXllci5kaXNwYXRjaEV2ZW50KG5ldyBNb3VzZUV2ZW50KFwiY29udGV4dG1lbnVcIiwgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlLCBidXR0b246IDIgfSkpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihDTEFTU0VTLkxPT1BfQlVUVE9OKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsaWNrKCk7IH0sIDUwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHsgc2V0QmVzdFF1YWxpdHksIGxvb3AsIHRvZ2dsZUxvb3AgfTtcclxufTtcclxuZXhwb3J0cy51c2VPYnNlcnZlciA9IHVzZU9ic2VydmVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnVzZVZpZGVvU3B5ID0gdm9pZCAwO1xyXG5jb25zdCByZWFjdF8xID0gcmVxdWlyZShcInJlYWN0XCIpO1xyXG5jb25zdCB1c2VWaWRlb1NweSA9ICgpID0+IHtcclxuICAgIGNvbnN0IFthY3RpdmVTcGVlZCwgc2V0QWN0aXZlU3BlZWRdID0gKDAsIHJlYWN0XzEudXNlU3RhdGUpKDEpO1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSAoMCwgcmVhY3RfMS51c2VSZWYpKG51bGwpO1xyXG4gICAgKDAsIHJlYWN0XzEudXNlRWZmZWN0KSgoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb25QbGF5QmFja1JhdGVDaGFuZ2UgPSAoeyB0YXJnZXQgfSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50KSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgLy8gRm9yIGZpeGluZyBidWcuIFdoZW4gdXNlciBjaGFuZ2UgYWN0aXZlIHRhYiBvciByZXNpemUgYnJvd3NlciB3aW5kb3csIFlvdXR1YmUgc2V0IHBsYXliYWNrUmF0ZSA9IDBcclxuICAgICAgICAgICAgaWYgKHRhcmdldC5wbGF5YmFja1JhdGUgPT09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIHNldEFjdGl2ZVNwZWVkKHRhcmdldC5wbGF5YmFja1JhdGUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgb25NdXRhdGUgPSAobXV0YXRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKCh7IHRhcmdldCwgYWRkZWROb2RlcywgcmVtb3ZlZE5vZGVzIH0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aWRlb3MgPSB0YXJnZXQucXVlcnlTZWxlY3RvckFsbChcInZpZGVvXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2aWRlb3MubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHZpZGVvcy5mb3JFYWNoKCh2aWRlbykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvLnBsYXliYWNrUmF0ZSA9IGFjdGl2ZVNwZWVkO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRlZE5vZGVzID09PSBudWxsIHx8IGFkZGVkTm9kZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkZGVkTm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJyYXRlY2hhbmdlXCIsIG9uUGxheUJhY2tSYXRlQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZWROb2RlcyA9PT0gbnVsbCB8fCByZW1vdmVkTm9kZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlbW92ZWROb2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJhdGVjaGFuZ2VcIiwgb25QbGF5QmFja1JhdGVDaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIG9ic2VydmVyLmN1cnJlbnQgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihvbk11dGF0ZSk7XHJcbiAgICAgICAgb2JzZXJ2ZXIuY3VycmVudC5vYnNlcnZlKGRvY3VtZW50LCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTtcclxuICAgICAgICAvLyBJbWl0YXRlIG11dGF0aW9uIHdoZW4gdXNlciBjaGFuZ2UgdmlkZW8gc3BlZWRcclxuICAgICAgICBvbk11dGF0ZShbeyB0YXJnZXQ6IGRvY3VtZW50LmJvZHkgfV0pO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvYnNlcnZlci5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbYWN0aXZlU3BlZWRdKTtcclxuICAgIHJldHVybiBbYWN0aXZlU3BlZWQsIHNldEFjdGl2ZVNwZWVkXTtcclxufTtcclxuZXhwb3J0cy51c2VWaWRlb1NweSA9IHVzZVZpZGVvU3B5O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmdldEl0ZW0gPSB2b2lkIDA7XHJcbmNvbnN0IGdldEl0ZW0gPSBhc3luYyAobmFtZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChuYW1lcyk7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2gge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59O1xyXG5leHBvcnRzLmdldEl0ZW0gPSBnZXRJdGVtO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnNldEl0ZW0gPSB2b2lkIDA7XHJcbmNvbnN0IHNldEl0ZW0gPSBhc3luYyAobmFtZSwgdmFsdWUpID0+IGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHsgW25hbWVdOiB2YWx1ZSB9KTtcclxuZXhwb3J0cy5zZXRJdGVtID0gc2V0SXRlbTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5ERUZBVUxUX1NUT1JBR0UgPSBleHBvcnRzLkRFRkFVTFRfU1BFRURTID0gdm9pZCAwO1xyXG5leHBvcnRzLkRFRkFVTFRfU1BFRURTID0gWzEsIDEuNSwgMiwgMi41LCAzLCA1XTtcclxuZXhwb3J0cy5ERUZBVUxUX1NUT1JBR0UgPSB7XHJcbiAgICBhdHRhY2g6IHsgdG9wTGVmdDogdHJ1ZSwgYm90dG9tTGVmdDogZmFsc2UgfSxcclxuICAgIHNwZWVkczogZXhwb3J0cy5ERUZBVUxUX1NQRUVEUyxcclxuICAgIGxvb3BCdXR0b246IHRydWUsXHJcbiAgICBwb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sXHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuY3JlYXRlUm9vdEVsZW1lbnQgPSB2b2lkIDA7XHJcbmNvbnN0IGNyZWF0ZVJvb3RFbGVtZW50ID0gKGlkID0gXCJyb290XCIpID0+IHtcclxuICAgIGNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIik7XHJcbiAgICByb290RWxlbWVudC5pZCA9IGlkO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQocm9vdEVsZW1lbnQpO1xyXG59O1xyXG5leHBvcnRzLmNyZWF0ZVJvb3RFbGVtZW50ID0gY3JlYXRlUm9vdEVsZW1lbnQ7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsInZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiA/IChvYmopID0+IChPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSkgOiAob2JqKSA9PiAob2JqLl9fcHJvdG9fXyk7XG52YXIgbGVhZlByb3RvdHlwZXM7XG4vLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3Rcbi8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuLy8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4vLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3Rcbi8vIG1vZGUgJiAxNjogcmV0dXJuIHZhbHVlIHdoZW4gaXQncyBQcm9taXNlLWxpa2Vcbi8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbl9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG5cdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IHRoaXModmFsdWUpO1xuXHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuXHRpZih0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlKSB7XG5cdFx0aWYoKG1vZGUgJiA0KSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG5cdFx0aWYoKG1vZGUgJiAxNikgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicpIHJldHVybiB2YWx1ZTtcblx0fVxuXHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuXHR2YXIgZGVmID0ge307XG5cdGxlYWZQcm90b3R5cGVzID0gbGVhZlByb3RvdHlwZXMgfHwgW251bGwsIGdldFByb3RvKHt9KSwgZ2V0UHJvdG8oW10pLCBnZXRQcm90byhnZXRQcm90byldO1xuXHRmb3IodmFyIGN1cnJlbnQgPSBtb2RlICYgMiAmJiB2YWx1ZTsgdHlwZW9mIGN1cnJlbnQgPT0gJ29iamVjdCcgJiYgIX5sZWFmUHJvdG90eXBlcy5pbmRleE9mKGN1cnJlbnQpOyBjdXJyZW50ID0gZ2V0UHJvdG8oY3VycmVudCkpIHtcblx0XHRPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjdXJyZW50KS5mb3JFYWNoKChrZXkpID0+IChkZWZba2V5XSA9ICgpID0+ICh2YWx1ZVtrZXldKSkpO1xuXHR9XG5cdGRlZlsnZGVmYXVsdCddID0gKCkgPT4gKHZhbHVlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBkZWYpO1xuXHRyZXR1cm4gbnM7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5obWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZSA9IE9iamVjdC5jcmVhdGUobW9kdWxlKTtcblx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCAnZXhwb3J0cycsIHtcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdHNldDogKCkgPT4ge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFUyBNb2R1bGVzIG1heSBub3QgYXNzaWduIG1vZHVsZS5leHBvcnRzIG9yIGV4cG9ydHMuKiwgVXNlIEVTTSBleHBvcnQgc3ludGF4LCBpbnN0ZWFkOiAnICsgbW9kdWxlLmlkKTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gbW9kdWxlO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5ubWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdHJldHVybiBtb2R1bGU7XG59OyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHRcImJsb2NrXCI6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua3lvdXRvb2xcIl0gPSBzZWxmW1wid2VicGFja0NodW5reW91dG9vbFwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5uYyA9IHVuZGVmaW5lZDsiLCIiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbXCJ2ZW5kb3JcIl0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvYmxvY2sudHN4XCIpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iLCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=